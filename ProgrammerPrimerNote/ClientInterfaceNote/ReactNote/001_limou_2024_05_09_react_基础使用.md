<style>
.heimu {
    position: relative;
    display: inline-block;
    color: transparent;
    text-decoration: none;
}
.heimu:: before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #333; /* æ·±è‰²é®ç›– */
    z-index: 1;
}
.heimu: hover:: before {
    background-color: transparent; /* é¼ æ ‡æ‚¬æµ®æ—¶ç§»é™¤æ·±è‰²é®ç›– */
}
.heimu: hover {
    color: white ! important; /* é¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤ºç™½è‰²æ–‡å­— */
    text-shadow: none;
}
</style>

**å¦‚æœæœ¬ç³»åˆ—æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥ [star ä¸€ä¸‹æˆ‘çš„ limou-learn-note](https://github.com/xiaogithubooo/LimouLearnNote)ï¼Œæ±‚æ±‚æƒ¹(à¹‘ï¼ ï¼œ)â˜†â™¡~**

**å ç”²ï¼šä»¥ä¸‹æ–‡ç« ä¸»è¦æ˜¯ä¾é æˆ‘çš„å®é™…ç¼–ç å­¦ä¹ ä¸­æ€»ç»“å‡ºæ¥çš„ç»éªŒä¹‹è°ˆï¼Œæ±‚é€»è¾‘è‡ªæ´½ï¼Œä¸èƒ½ç™¾åˆ†ç™¾ä¿è¯æ­£ç¡®ï¼Œæœ‰é”™è¯¯ã€æœªå®šä¹‰ã€ä¸åˆé€‚çš„å†…å®¹è¯·å°½æƒ…æŒ‡å‡ºï¼**

[TOC]

>   [!NOTE]
>
>   æ¦‚è¦ï¼š...

>   [!NOTE]
>
>   èµ„æºï¼š...

------

# 1.React çš„ä¸‹è½½

`React` ä¹Ÿæ˜¯ä¸€ä¸ª `JS` åº“ï¼Œå’Œ `Vue` æ˜¯ç±»ä¼¼ï¼Œä¸è¿‡è¿™ä¸ªåº“å¼€å‘èµ·æ¥è¦æ¯” `Vue` æ›´åŠ å¿«é€Ÿï¼Œä¸¤è€…éƒ½æ˜¯ä¸ºäº†æ„å»ºå•ä½“åº”ç”¨ç¨‹åºçš„ `SPA` çš„ `JS` åº“ã€‚ä¸è¿‡æˆ‘éœ€è¦åœ¨æ‚¨æœ‰ `Vue` çš„åŸºç¡€ä¸Šå†è¿›ä¸€æ­¥å­¦ä¹  `React`ï¼Œè¿™æ ·åé¢æˆ‘ä»¬æ‰èƒ½å¯¹æ¯”å‡ºä¸¤è€…çš„åŒºåˆ«ï¼ˆè¿™ç‚¹å¾ˆé‡è¦ï¼‰ã€‚

å› æ­¤æˆ‘ä»¬åªéœ€è¦ä¸‹è½½ `React` çš„ `JS` ä»£ç å°±å¯ä»¥ä½¿ç”¨ `React` äº†ï¼Œæˆ‘ä»¬å…ˆä¸ä½¿ç”¨è„šæ‰‹æ¶ï¼Œæš‚æ—¶ä½¿ç”¨æœ€åŸç”Ÿçš„å¼€å‘æ–¹å¼ã€‚[è¿™é‡Œæä¾›ä¸€ä¸ªå®˜æ–¹æ–‡æ¡£ï¼Œé‡Œé¢æä¾›äº†æœ€æ–°çš„æºä»£ç é“¾æ¥](https://react.docschina.org/learn/installation)ï¼Œè¿™é‡Œæˆ‘åªå±•ç¤ºæˆ‘æ­¤æ—¶ç¼–å†™æ–‡æ¡£æ—¶æœ€æ–°çš„é“¾æ¥ï¼ˆä¸‹é¢çš„ä¸‰ä¸ªé“¾æ¥éƒ½åœ¨å®˜æ–¹æä¾›çš„ `HTML` é¡µé¢ä¸­ï¼‰ã€‚

```html
<!-- æºä»£ç é“¾æ¥ -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script> <!-- React æ ¸å¿ƒæ„å»ºç•Œé¢åº“: ç»„ä»¶å£°æ˜, çŠ¶æ€ç®¡ç†, ç”Ÿå‘½å‘¨æœŸ... -->
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- ReactDOM ç»„ä»¶æ¸²æŸ“åº“: æŠŠ React ç»„ä»¶å®æ—¶æ¸²æŸ“åˆ°æµè§ˆå™¨ DOM ä¸Š, å¤„ç†å’Œæµè§ˆå™¨æ¸²æŸ“ç›¸å…³çš„å·¥ä½œ -->

<!-- ä¸è¦ä½¿ç”¨è¿™ä¸ªé“¾æ¥åˆ°å®é™…ç”Ÿäº§ä¸­(åŸå› æˆ‘ä»¬åé¢å†æ¥æåŠ): -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- Babel Standalone å³æ—¶ JSX è¯­æ³•ç¼–è¯‘åº“: è¿™ä¸ªé“¾æ¥æŒ‡å‘ Babel çš„æºä»£ç , è¿™ä¸ªæºä»£ç ç”¨ç”¨äºç¼–è¯‘ç°ä»£ JS ä»£ç å’Œ JSX ä»£ç , JSX æ˜¯ JS ä»£ç çš„æ‹“å±•, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé“¾æ¥å°±ä¼šå¯¼è‡´ä»£ç ä¸­çš„ JSX è¯­æ³•æ— æ³•è¢«æ­£ç¡®è½¬åŒ–, å› æ­¤æ— æ³•è¢«æµè§ˆå™¨æ¸²æŸ“ -->

```

å½“ç„¶æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©ä»è¿œç«¯ç›´æ¥ä¸‹è½½æºä»£ç ï¼Œé¡ºç€é“¾æ¥æŠŠä»£ç ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­è¿›è¡Œå¼•ç”¨å³å¯ï¼Œè¿™é‡Œæˆ‘ä¿æŒä¸Šé¢çš„å¼•å…¥æ–¹å¼ã€‚

>   [!WARNING]
>
>   æ³¨æ„ï¼šæœ¬æ•™ç¨‹é‡‡ç”¨çš„ `React` ç‰ˆæœ¬ä¸º `React18`ï¼Œå¯èƒ½å’Œæ—§ç‰ˆæœ¬æœ‰äº›è¯­æ³•ä¸Šçš„ä¸åŒ...

# 2.React çš„ç¬¬ä¸€ä»½ä»£ç 

```jsx
<!-- React çš„ç¬¬ä¸€ä»½ä»£ç  -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script> <!-- React æ ¸å¿ƒæ„å»ºç•Œé¢åº“: ç»„ä»¶å£°æ˜, çŠ¶æ€ç®¡ç†, ç”Ÿå‘½å‘¨æœŸ... -->
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- ReactDOM ç»„ä»¶æ¸²æŸ“åº“: æŠŠ React ç»„ä»¶å®æ—¶æ¸²æŸ“åˆ°æµè§ˆå™¨ DOM ä¸Š, å¤„ç†å’Œæµè§ˆå™¨æ¸²æŸ“ç›¸å…³çš„å·¥ä½œ -->

    <!-- ä¸è¦ä½¿ç”¨è¿™ä¸ªé“¾æ¥åˆ°å®é™…ç”Ÿäº§ä¸­(åŸå› æˆ‘ä»¬åé¢å†æ¥æåŠ): -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- Babel Standalone å³æ—¶ JSX è¯­æ³•ç¼–è¯‘åº“: è¿™ä¸ªé“¾æ¥æŒ‡å‘ Babel çš„æºä»£ç , è¿™ä¸ªæºä»£ç ç”¨ç”¨äºç¼–è¯‘ç°ä»£ JS ä»£ç å’Œ JSX ä»£ç , JSX æ˜¯ JS ä»£ç çš„æ‹“å±•, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé“¾æ¥å°±ä¼šå¯¼è‡´ä»£ç ä¸­çš„ JSX è¯­æ³•æ— æ³•è¢«æ­£ç¡®è½¬åŒ–, å› æ­¤æ— æ³•è¢«æµè§ˆå™¨æ¸²æŸ“ -->
    </head>
<body>
    <!-- è¿™ä¸ªå—æ˜¯ React åº”ç”¨çš„ä¸€ä¸ªæŒ‚è½½ç‚¹ -->
    <div id="example"></div>

    <script type="text/babel"> <!-- æ ‡è®° JavaScript ä»£ç å—ä¸ºä½¿ç”¨äº† JSX è¯­æ³•çš„ä»£ç  -->
    // åˆ›å»ºä¸€ä¸ªåä¸º App çš„åº”ç”¨
    function App() {
        return <h1>Hello, React!</h1>; // è¿™é‡Œå…¶å®å°±æ˜¯ JSX è¯­æ³•, å…è®¸æ‚¨åœ¨ JS ä¸­ç¼–å†™ HTML ç»“æ„, è¿™é‡Œçš„ JS ä»£ç è¿”å›äº†ä¸€ä¸ª <h1> å…ƒç´ 
    }

    // å¯»æ‰¾æŒ‚è½½ç‚¹, åˆ›å»ºä¸€ä¸ªåä¸º root çš„æ ¹èŠ‚ç‚¹
    const root = ReactDOM.createRoot(document.getElementById("example")); // å…¶å®å°±æ˜¯å¯»æ‰¾ DOM é¡µé¢ä¸­ id=example çš„å…ƒç´ 
    
    // æŒ‚è½½
    root.render(<App />); // ä½¿ç”¨æ ¹èŠ‚ç‚¹ root æ¥æ¸²æŸ“ App åº”ç”¨, React å°†è°ƒç”¨ App() å°†ç»“æœæ’å…¥åˆ°æŒ‚è½½ç‚¹ä¸­
    </script>
</body>
</html>

```

![image-20240923135756886](./assets/image-20240923135756886.png)

ä¸Šè¿°ä»£ç å¦‚æœæ‚¨æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå°±æŒ‰ä¸‹é¢è¿™æ ·ç®€å•ç†è§£ï¼š

1.   åˆ›å»ºæŒ‚è½½ç‚¹ = åˆ›å»ºç©ºå®¹å™¨
2.   ç¼–å†™åº”ç”¨ = ç¼–å†™å‡½æ•°
3.   åˆ›å»ºæ ¹èŠ‚ç‚¹ = å¯»æ‰¾ `DOM` å…ƒç´ 
4.   æŒ‚è½½ = æ¸²æŸ“

>   [!NOTE]
>
>   åæ§½ï¼šå¦‚æœæ‚¨å­¦è¿‡ `Linux` çš„æ–‡ä»¶æŒ‚è½½ï¼Œåº”è¯¥èƒ½å¾ˆå¿«ç†è§£ä¸Šé¢çš„è¿‡ç¨‹ï¼Œå› ä¸ºè¿™å’Œå°†æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°æŒ‚è½½ç‚¹çš„é€»è¾‘æ˜¯å¾ˆç±»ä¼¼çš„...

# 3.React çš„ç»„ä»¶

## 3.1.ç»„ä»¶çš„åˆ›å»º

åˆ©ç”¨ `React å…ƒç´ ` å¯ä»¥æ„å»ºå‡ºä¸€ä¸ª `React åº”ç”¨`ï¼Œè€Œ `React å…ƒç´ ` æ˜¯ç”± `JSX` ç¼–å†™çš„ä¸€ç§ä¸å¯å˜å¯¹è±¡ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸å¯æ”¹å˜ã€‚ä¸‹è¿° `React DOM` æœ€ç»ˆå¯ä»¥é€šè¿‡ `ReactDOM åº“` æ¥æ˜ å°„åˆ° `æµè§ˆå™¨ DOM`ï¼Œæœ€ç»ˆæ¸²æŸ“åˆ°æµè§ˆå™¨ä¸Šã€‚

```jsx
const element = <p>è¿™æ˜¯ä¸€ä¸ª React å…ƒç´ </p>;
```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼šä¸Šè¿°è¿™ç§æ—¢ä¸åƒå­—ç¬¦ä¸²åˆä¸åƒ `HTML` çš„è¯­æ³•å°±æ˜¯ `JSX`ï¼Œè¿™ç§è¯­æ³•æ˜¯é€šè¿‡ `JS` æ¥å®ç°çš„ï¼Œ`React` é€šè¿‡å¤§é‡çš„ `JSX` å£°æ˜æ¥åˆ›å»º `React å…ƒç´ `ï¼Œè¿›è€Œæ„å»ºå‡ºç”¨æˆ·ç•Œé¢ï¼ˆå®Œå…¨å¯ä»¥è¯´ `JSX` å°±æ˜¯ä¸ºäº† `React` è€Œè®¾è®¡çš„ï¼‰ã€‚

>   [!IMPORTANT]
>
>   è¡¥å……ï¼š`React å…ƒç´ ` å‡ ä¹éƒ½æ˜¯ç”± `JSX` ç¼–å†™çš„ï¼Œå°½ç®¡ `React` æä¾›äº†æ— éœ€ä½¿ç”¨ `JSX` çš„çº¯ `JS` ç”¨æ³•æ¥ç¼–å†™ `React åº”ç”¨`ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸æ¨èè¿™ä¹ˆåš...


>   [!IMPORTANT]
>
>   è¡¥å……ï¼š`React DOM` å¯ä»¥çœ‹ä½œä¸€ç§ `è™šæ‹Ÿ DOM`ï¼Œæœ€ç»ˆæ˜¯ä¸€å®šè¦è½¬åŒ–ä¸º `ç‰©ç† DOM` ä¹Ÿå°±æ˜¯ `æµè§ˆå™¨ DOM`...

å»é™¤æ‰å‡½æ•°ï¼Œæˆ‘ä»¬å°è¯•æ”¹å†™ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰çš„ç¬¬ä¸€ä»½ä»£ç ï¼Œè®©æ‚¨ç›´è§‚ç†è§£æ•´ä¸ªç¼–å†™è¿‡ç¨‹ã€‚

```jsx
<!-- æ”¹å†™ React çš„ç¬¬ä¸€ä»½ä»£ç  -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script> <!-- React æ ¸å¿ƒæ„å»ºç•Œé¢åº“: ç»„ä»¶å£°æ˜, çŠ¶æ€ç®¡ç†, ç”Ÿå‘½å‘¨æœŸ... -->
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- ReactDOM ç»„ä»¶æ¸²æŸ“åº“: æŠŠ React ç»„ä»¶å®æ—¶æ¸²æŸ“åˆ°æµè§ˆå™¨ DOM ä¸Š, å¤„ç†å’Œæµè§ˆå™¨æ¸²æŸ“ç›¸å…³çš„å·¥ä½œ -->
    
    <!-- ä¸è¦ä½¿ç”¨è¿™ä¸ªé“¾æ¥åˆ°å®é™…ç”Ÿäº§ä¸­(åŸå› æˆ‘ä»¬åé¢å†æ¥æåŠ): -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- Babel Standalone å³æ—¶ JSX è¯­æ³•ç¼–è¯‘åº“: è¿™ä¸ªé“¾æ¥æŒ‡å‘ Babel çš„æºä»£ç , è¿™ä¸ªæºä»£ç ç”¨ç”¨äºç¼–è¯‘ç°ä»£ JS ä»£ç å’Œ JSX ä»£ç , JSX æ˜¯ JS ä»£ç çš„æ‹“å±•, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé“¾æ¥å°±ä¼šå¯¼è‡´ä»£ç ä¸­çš„ JSX è¯­æ³•æ— æ³•è¢«æ­£ç¡®è½¬åŒ–, å› æ­¤æ— æ³•è¢«æµè§ˆå™¨æ¸²æŸ“ -->
</head>
<body>
    <!-- è¿™ä¸ªå—æ˜¯ React åº”ç”¨çš„ä¸€ä¸ªæŒ‚è½½ç‚¹ -->
    <div id="example"></div>

    <script type="text/babel">
    // ç›¸å½“äºåˆ›å»ºä¸€ä¸ªåŒ¿åçš„åº”ç”¨, è¿™ä¸ªåŒ¿åçš„ React åº”ç”¨ç›®å‰åªç”±ä¸€ä¸ª React å…ƒç´ æ„æˆ
    const element = <p>è¿™æ˜¯ä¸€ä¸ª React å…ƒç´ </p>;

    // å¯»æ‰¾æŒ‚è½½ç‚¹, å¹¶ä¸”åˆ›å»ºä¸€ä¸ªåä¸º root çš„æ ¹èŠ‚ç‚¹
    const root = ReactDOM.createRoot(document.getElementById("example")); // å…¶å®å°±æ˜¯å¯»æ‰¾ DOM é¡µé¢ä¸­ id=example çš„å…ƒç´ 
    
    // æŒ‚è½½
    root.render(element); // ä½¿ç”¨æ ¹èŠ‚ç‚¹ root æ¥æ¸²æŸ“ element åº”ç”¨, React å°†è‡ªåŠ¨å°† element å…ƒç´ è½¬åŒ–ä¸ºåº”ç”¨(è¿™åªæ˜¯ä¸€ç§ç²—ç³™ç†è§£, å®é™…å¯èƒ½ä¸æ˜¯è¿™ä¹ˆåšçš„, æˆ‘è¿™ç§è¡¨è¿°åªæ˜¯æ–¹ä¾¿å­¦ä¹ ), å°†ç»“æœæ’å…¥åˆ°æŒ‚è½½ç‚¹ä¸­
    </script>
</body>
</html>

```

![image-20240923135747858](./assets/image-20240923135747858.png)

>   [!CAUTION]
>
>   è­¦å‘Šï¼šä¸Šè¿°æ‰€è°“çš„â€œåŒ¿ååº”ç”¨ã€å…ƒç´ è½¬åŒ–ä¸ºåº”ç”¨â€åªæ˜¯æˆ‘çš„ä¸ªäººè¯´æ³•ï¼Œæ–¹ä¾¿å­¦ä¹ è€Œå·²...

## 3.2.ç»„ä»¶çš„æ›´æ–°

`React` å…ƒç´ éƒ½æ˜¯ä¸å¯å˜å¾—ï¼ŒåŒ…æ‹¬å†…å®¹å’Œå±æ€§ï¼Œæ›´æ–°ç•Œé¢çš„å”¯ä¸€åŠæ³•å°±æ˜¯åˆ›å»ºæ–°çš„å…ƒç´ å†æ¬¡ä¼ å…¥ `root.render()` è¿›è¡Œé‡æ–°æŒ‚è½½ï¼Œè¿™é‡Œç»™ä¸€ä¸ªåœ¨é¡µé¢ä¸Šå®æ—¶æ˜¾ç¤ºæ—¶é—´çš„ä¾‹å­ï¼Œå’Œæˆ‘ä»¬ç¬¬ä¸€ä»½ä»£ç ä¸€æ ·ï¼Œç…§çŒ«ç”»è™ã€‚

```jsx
<!-- æ›´æ–°ç»„ä»¶(æ­£å¸¸) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script> <!-- React æ ¸å¿ƒæ„å»ºç•Œé¢åº“: ç»„ä»¶å£°æ˜, çŠ¶æ€ç®¡ç†, ç”Ÿå‘½å‘¨æœŸ... -->
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- ReactDOM ç»„ä»¶æ¸²æŸ“åº“: æŠŠ React ç»„ä»¶å®æ—¶æ¸²æŸ“åˆ°æµè§ˆå™¨ DOM ä¸Š, å¤„ç†å’Œæµè§ˆå™¨æ¸²æŸ“ç›¸å…³çš„å·¥ä½œ -->
    
    <!-- ä¸è¦ä½¿ç”¨è¿™ä¸ªé“¾æ¥åˆ°å®é™…ç”Ÿäº§ä¸­(åŸå› æˆ‘ä»¬åé¢å†æ¥æåŠ): -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- Babel Standalone å³æ—¶ JSX è¯­æ³•ç¼–è¯‘åº“: è¿™ä¸ªé“¾æ¥æŒ‡å‘ Babel çš„æºä»£ç , è¿™ä¸ªæºä»£ç ç”¨ç”¨äºç¼–è¯‘ç°ä»£ JS ä»£ç å’Œ JSX ä»£ç , JSX æ˜¯ JS ä»£ç çš„æ‹“å±•, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé“¾æ¥å°±ä¼šå¯¼è‡´ä»£ç ä¸­çš„ JSX è¯­æ³•æ— æ³•è¢«æ­£ç¡®è½¬åŒ–, å› æ­¤æ— æ³•è¢«æµè§ˆå™¨æ¸²æŸ“ -->
</head>
<body>
    <!-- æŒ‚è½½ç‚¹ -->
    <div id="example"></div>

    <script type="text/babel">
    // å¯»æ‰¾æŒ‚è½½ç‚¹, åˆ›å»ºæ ¹èŠ‚ç‚¹
    const root = ReactDOM.createRoot(document.getElementById("example"));
    
    // ç¼–å†™ Tick åº”ç”¨
    function Tick() {
        const element = (
        <div>
            <h1>Hello, React!</h1>
            <h2>ç°åœ¨æ˜¯ {new Date().toLocaleTimeString()}.</h2>
        </div>
        ); // è¿™é‡Œçš„ element è¿˜æ˜¯ç®—ä¸€ä¸ª React å…ƒç´ 

        // å®æ—¶æŒ‚è½½
        root.render(element); // è¿™æ˜¯ä¸€ç§ä¸€è¾¹åˆ›å»ºåº”ç”¨ä¸€è¾¹æŒ‚è½½çš„å†™æ³•, ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„, è¿™æ„å‘³åº”ç”¨å¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™è¢«æ¸²æŸ“, è€Œä¸æ˜¯äº¤ç»™å¤–éƒ¨çš„æ¸²æŸ“
    }
    
    setInterval(Tick, 1000); // æ¯å— 1 s å°±è°ƒç”¨ Tick()
    </script>
</body>
</html>

```

ç”šè‡³å°è£…å¾—æ›´ä¸¥å¯†ä¸€äº›ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š

```jsx
<!-- æ›´æ–°ç»„ä»¶(å°è£…) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script> <!-- React æ ¸å¿ƒæ„å»ºç•Œé¢åº“: ç»„ä»¶å£°æ˜, çŠ¶æ€ç®¡ç†, ç”Ÿå‘½å‘¨æœŸ... -->
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- ReactDOM ç»„ä»¶æ¸²æŸ“åº“: æŠŠ React ç»„ä»¶å®æ—¶æ¸²æŸ“åˆ°æµè§ˆå™¨ DOM ä¸Š, å¤„ç†å’Œæµè§ˆå™¨æ¸²æŸ“ç›¸å…³çš„å·¥ä½œ -->
    
    <!-- ä¸è¦ä½¿ç”¨è¿™ä¸ªé“¾æ¥åˆ°å®é™…ç”Ÿäº§ä¸­(åŸå› æˆ‘ä»¬åé¢å†æ¥æåŠ): -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- Babel Standalone å³æ—¶ JSX è¯­æ³•ç¼–è¯‘åº“: è¿™ä¸ªé“¾æ¥æŒ‡å‘ Babel çš„æºä»£ç , è¿™ä¸ªæºä»£ç ç”¨ç”¨äºç¼–è¯‘ç°ä»£ JS ä»£ç å’Œ JSX ä»£ç , JSX æ˜¯ JS ä»£ç çš„æ‹“å±•, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé“¾æ¥å°±ä¼šå¯¼è‡´ä»£ç ä¸­çš„ JSX è¯­æ³•æ— æ³•è¢«æ­£ç¡®è½¬åŒ–, å› æ­¤æ— æ³•è¢«æµè§ˆå™¨æ¸²æŸ“ -->
</head>
<body>
    <!-- æŒ‚è½½ç‚¹ -->
    <div id="example"></div>

    <script type="text/babel">
    // ç¼–å†™ Tick åº”ç”¨
    function Tick() {
        // å¯»æ‰¾æŒ‚è½½ç‚¹, åˆ›å»ºæ ¹èŠ‚ç‚¹
        const root = ReactDOM.createRoot(document.getElementById("example"));
        
        // å †ç§¯ React å…ƒç´ 
        const element = (
        <div>
            <h1>Hello, React!</h1>
            <h2>ç°åœ¨æ˜¯ {new Date().toLocaleTimeString()}.</h2>
        </div>
        ); // è¿™é‡Œçš„ element è¿˜æ˜¯ç®—ä¸€ä¸ª React å…ƒç´ 

        // å®æ—¶æŒ‚è½½
        root.render(element); // è¿™æ˜¯ä¸€ç§ä¸€è¾¹åˆ›å»ºåº”ç”¨ä¸€è¾¹æŒ‚è½½çš„å†™æ³•, ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„, è¿™æ„å‘³åº”ç”¨å¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™è¢«æ¸²æŸ“, è€Œä¸æ˜¯äº¤ç»™å¤–éƒ¨çš„æ¸²æŸ“
    }
    
    // æ¯å— 1 s å°±è°ƒç”¨ Tick()
    setInterval(Tick, 1000);
    </script>
</body>
</html>

```

å¦‚æœå¸Œæœ›æé«˜ä»£ç å¯ç»´æŠ¤æ€§ï¼Œå¯ä»¥è¿›è¡Œè§£è€¦ï¼š

```jsx
<!-- æ›´æ–°ç»„ä»¶(è§£è€¦) -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script> <!-- React æ ¸å¿ƒæ„å»ºç•Œé¢åº“: ç»„ä»¶å£°æ˜, çŠ¶æ€ç®¡ç†, ç”Ÿå‘½å‘¨æœŸ... -->
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- ReactDOM ç»„ä»¶æ¸²æŸ“åº“: æŠŠ React ç»„ä»¶å®æ—¶æ¸²æŸ“åˆ°æµè§ˆå™¨ DOM ä¸Š, å¤„ç†å’Œæµè§ˆå™¨æ¸²æŸ“ç›¸å…³çš„å·¥ä½œ -->
    
    <!-- ä¸è¦ä½¿ç”¨è¿™ä¸ªé“¾æ¥åˆ°å®é™…ç”Ÿäº§ä¸­(åŸå› æˆ‘ä»¬åé¢å†æ¥æåŠ): -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- Babel Standalone å³æ—¶ JSX è¯­æ³•ç¼–è¯‘åº“: è¿™ä¸ªé“¾æ¥æŒ‡å‘ Babel çš„æºä»£ç , è¿™ä¸ªæºä»£ç ç”¨ç”¨äºç¼–è¯‘ç°ä»£ JS ä»£ç å’Œ JSX ä»£ç , JSX æ˜¯ JS ä»£ç çš„æ‹“å±•, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé“¾æ¥å°±ä¼šå¯¼è‡´ä»£ç ä¸­çš„ JSX è¯­æ³•æ— æ³•è¢«æ­£ç¡®è½¬åŒ–, å› æ­¤æ— æ³•è¢«æµè§ˆå™¨æ¸²æŸ“ -->
</head>
<body>
    <!-- æŒ‚è½½ç‚¹ -->
    <div id="example"></div>

    <script type="text/babel">
        // åˆ†ç¦»éª¨æ¶, æœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨(å­åº”ç”¨: æ§åˆ¶ç•Œé¢æ˜¾ç¤º)
        function Clock(props) {
            return (
                <div>
                    <h1>Hello, React!</h1>
                    <h2>ç°åœ¨æ˜¯ {props.date.toLocaleTimeString()}.</h2>
                </div>
            );
        }

        // ç¼–å†™ Tick åº”ç”¨(çˆ¶åº”ç”¨: æ§åˆ¶æ•°æ®ä¼ å…¥)
        function Tick() {
            // å¯»æ‰¾æŒ‚è½½ç‚¹, åˆ›å»ºæ ¹èŠ‚ç‚¹
            const root = ReactDOM.createRoot(document.getElementById("example"));
            
            // å®æ—¶æŒ‚è½½
            root.render(<Clock date={new Date()} />); // è¿™æ˜¯ä¸€ç§ä¸€è¾¹åˆ›å»ºåº”ç”¨ä¸€è¾¹æŒ‚è½½çš„å†™æ³•, ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„, è¿™æ„å‘³åº”ç”¨å¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™è¢«æ¸²æŸ“, è€Œä¸æ˜¯äº¤ç»™å¤–éƒ¨çš„æ¸²æŸ“
        }

        // æ¯å— 1 s å°±è°ƒç”¨ Tick()
        setInterval(Tick, 1000);
    </script>
</body>
</html>

```

å¦å¤– `React JSX` ä¹Ÿå¯ä»¥æŠŠæ ¸å¿ƒä»£ç å°è£…åœ¨ä¸€ä¸ª `.js` æ–‡ä»¶ä¸­ï¼Œç„¶åäº¤ç»™å…¶ä»–çš„ `HTML` é¡µé¢ä¸­ä½¿ç”¨ `<script type="text/babel" src="xxx.js"></script>` çš„æ–¹å¼å¼•å…¥ï¼Œå¹¶ä¸”å€Ÿæ­¤ä½¿ç”¨ç»„ä»¶ã€‚

```jsx
// anonymity_app.js
// åˆ†ç¦»éª¨æ¶, æœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨(å­åº”ç”¨: æ§åˆ¶ç•Œé¢æ˜¾ç¤º)
function Clock(props) {
    return (
        <div>
            <h1>Hello, React!</h1>
            <h2>ç°åœ¨æ˜¯ {props.date.toLocaleTimeString()}.</h2>
        </div>
    );
}

// ç¼–å†™ Tick åº”ç”¨(çˆ¶åº”ç”¨: æ§åˆ¶æ•°æ®ä¼ å…¥)
function Tick() {
    // å¯»æ‰¾æŒ‚è½½ç‚¹, åˆ›å»ºæ ¹èŠ‚ç‚¹
    const root = ReactDOM.createRoot(document.getElementById("example"));
    
    // å®æ—¶æŒ‚è½½
    root.render(<Clock date={new Date()} />); // è¿™æ˜¯ä¸€ç§ä¸€è¾¹åˆ›å»ºåº”ç”¨ä¸€è¾¹æŒ‚è½½çš„å†™æ³•, ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„, è¿™æ„å‘³åº”ç”¨å¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™è¢«æ¸²æŸ“, è€Œä¸æ˜¯äº¤ç»™å¤–éƒ¨çš„æ¸²æŸ“
}

// æ¯å— 1 s å°±è°ƒç”¨ Tick()
setInterval(Tick, 1000);
```

```html
<!-- test.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script> <!-- React æ ¸å¿ƒæ„å»ºç•Œé¢åº“: ç»„ä»¶å£°æ˜, çŠ¶æ€ç®¡ç†, ç”Ÿå‘½å‘¨æœŸ... -->
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- ReactDOM ç»„ä»¶æ¸²æŸ“åº“: æŠŠ React ç»„ä»¶å®æ—¶æ¸²æŸ“åˆ°æµè§ˆå™¨ DOM ä¸Š, å¤„ç†å’Œæµè§ˆå™¨æ¸²æŸ“ç›¸å…³çš„å·¥ä½œ -->
    
    <!-- ä¸è¦ä½¿ç”¨è¿™ä¸ªé“¾æ¥åˆ°å®é™…ç”Ÿäº§ä¸­(åŸå› æˆ‘ä»¬åé¢å†æ¥æåŠ): -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- Babel Standalone å³æ—¶ JSX è¯­æ³•ç¼–è¯‘åº“: è¿™ä¸ªé“¾æ¥æŒ‡å‘ Babel çš„æºä»£ç , è¿™ä¸ªæºä»£ç ç”¨ç”¨äºç¼–è¯‘ç°ä»£ JS ä»£ç å’Œ JSX ä»£ç , JSX æ˜¯ JS ä»£ç çš„æ‹“å±•, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé“¾æ¥å°±ä¼šå¯¼è‡´ä»£ç ä¸­çš„ JSX è¯­æ³•æ— æ³•è¢«æ­£ç¡®è½¬åŒ–, å› æ­¤æ— æ³•è¢«æµè§ˆå™¨æ¸²æŸ“ -->
</head>
<body>
    <!-- æŒ‚è½½ç‚¹ -->
    <div id="example"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

å¥½äº†ï¼Œåˆ°è¿™å°±å¯ä»¥äº†ï¼Œç›¸ä¿¡æ‚¨å¯¹äº `React` çš„åŸºæœ¬ä»£ç ç¼–å†™è¿˜æ˜¯æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚

>   [!IMPORTANT]
>
>   è¡¥å……ï¼šå®é™…ä¸Šè¿˜èƒ½ç»“åˆ `ES6` çš„ç±»å†™æ³•ï¼Œä¸è¿‡ä¸ºäº†ä¸ç»™æ‚¨æ·»åŠ è´Ÿæ‹…ï¼Œè¿™éƒ¨åˆ†æˆ‘åé¢å†æ...

## 3.3.ç»„ä»¶çš„æ¨¡æ¿

`JSX` çœ‹èµ·æ¥å°±åƒæ˜¯åµŒå…¥åˆ° `JS` ä¸­çš„ `HTML`ï¼Œä¸è¿‡å†…éƒ¨ç¼–å†™çš„æ ‡ç­¾å’Œ `HTML` æ˜¯æœ‰å¾ˆå¤§çš„ä¸åŒçš„ã€‚ä¸€ä¸ª `JSX` å¦‚æœæœ‰å¤šä¸ªæ ‡ç­¾ç»„æˆï¼Œå°±éœ€è¦ä¸€ä¸ªæ ¹æ ‡ç­¾è¿›è¡ŒåŒ…è£¹ã€‚`JSX` çš„æ ‡ç­¾ä¸­è¿˜å¯ä»¥ä½¿ç”¨ `{}` æ¨¡æ¿å¡«å†™ `JS` ä»£ç ï¼Œè¿™ç‚¹å¾ˆåƒä¸€äº›å…·æœ‰æ¨¡æ¿çš„æ¡†æ¶ï¼ˆ`Falsk` å’Œ `Django` åŒ…æ‹¬ `Vue` ä¸­å°±æœ‰ä½¿ç”¨ç±»ä¼¼çš„æŠ€æœ¯ï¼ŒåŠŸèƒ½ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼‰

```jsx
// æ¼”ç¤º JSX çš„ä¸€äº›ç‰¹ç‚¹
<script>
const i = 0; // ç”±äºæ— æ³•åœ¨ {} ä¸­ä½¿ç”¨ if-else çš„ JS ä»£ç , æ‰€ä»¥è¿™é‡Œåªèƒ½ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼
const element = (
    <div>
        <ul>
            <li>é¡¹ç›®1</li>
            <li>é¡¹ç›®2</li>
            <li>é¡¹ç›®{2+1}</li>
            <li>{i == 0 ? 'yes' : 'no'}</li>
        </ul>
    </div>
); // ä¸Šé¢å¤šä¸ªæ ‡ç­¾ç»„åˆæ—¶, æœ€å¤–é¢æ€»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´ (è¿™é‡Œæ˜¯ div å…ƒç´ )
</script>
```

`JSX` è¿˜å…è®¸æ¨¡æ¿ä¸­å­˜åœ¨æ•°ç»„ï¼Œè¿™æ–¹ä¾¿æˆ‘ä»¬åç»­å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œæ“ä½œåå†è¿›è¡Œæ¸²æŸ“ï¼Œè¿™é‡Œåªæ˜¯ç®€å•ç”¨ä¸€ä¸‹ã€‚

```jsx
// æ¨¡æ¿ä¸­çš„æ•°ç»„
var contentArr = [
  <img src="https://example.com/image1.jpg" alt="Image 1" />,
  <p>è¿™æ˜¯ä¸€æ®µå…³äºå›¾ç‰‡çš„æè¿°ã€‚</p>,
  <img src="https://example.com/image2.jpg" alt="Image 2" />,
  <p>è¿™æ˜¯ä¸€æ®µå…³äºç¬¬äºŒå¼ å›¾ç‰‡çš„æè¿°ã€‚</p>,
];

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(
  <div>{contentArr}</div>
);

```

`JSX` çš„æ³¨é‡Šå¯ä»¥å†™åœ¨ `{/* ... */}` ä¸­ã€‚

>   [!IMPORTANT]
>
>   è¡¥å……ï¼š`React åº”ç”¨` æœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ï¼ˆå…¶å®åº”è¯¥å« `JSX` çš„å±æ€§ï¼‰ï¼Œè¿™é‡Œç»™æ‚¨ç¨å¾®è¡¥å……ä¸€ä¸‹ã€‚
>
>   -   `React DOM` æŠŠ `className` ä½œä¸ºç±»å±æ€§åç§°ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ `class`
>
>   -   `style` æ ·å¼å±æ€§ï¼ˆåé¢è¿›è¡Œæ¼”ç¤ºï¼‰ï¼Œ`React` ä¹Ÿæ¨èæ‚¨ä½¿ç”¨å†…è”æ¨¡å¼æ¥èµ‹äºˆæ ·å¼ï¼Œæ ·å¼çš„è¯­æ³•å’Œ `CSS` æ˜¯å¾ˆç±»ä¼¼çš„ï¼ˆæ¯”è¾ƒå¤§çš„åŒºåˆ«æ˜¯ `CSS` ä½¿ç”¨è¿å­—ç¬¦å‘½åï¼Œè€Œ `JSX` ä½¿ç”¨é©¼å³°å‘½åï¼Œå¹¶ä¸”ä¸æ”¯æŒä¼ªç±»ç­‰è¯­æ³•ï¼‰
>
>   -   `data-xxx` è‡ªå®šä¹‰å±æ€§ï¼Œè‡ªå®šä¹‰çš„å±æ€§åº”è¯¥ä½¿ç”¨ `data-` ä½œä¸ºå‰ç¼€æ‰èƒ½ä½¿ç”¨
>
>   ```jsx
>   // anonymity_app.js
>   var aStyle = {
>       fontSize: 100,
>       color: '#FF0000'
>   };
>   const element = <p className="elem" style={aStyle}>è¿™æ˜¯ä¸€ä¸ª React å…ƒç´ {/*è¿™æ˜¯ä¸æ˜¾ç¤ºåˆ°æµè§ˆå™¨ä¸Šçš„æ³¨é‡Š*/}</p>;
>   const root = ReactDOM.createRoot(document.getElementById("example"));
>   root.render(element);
>   
>   ```
>
>   ```html
>   <!-- test.html -->
>   <!DOCTYPE html>
>   <html lang="en">
>   <head>
>       <meta charset="UTF-8">
>       <meta name="viewport" content="width=device-width, initial-scale=1.0">
>       <title>React Test</title>
>       <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
>       <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
>       <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
>   </head>
>   <body>
>       <div id="example"></div>
>       <script type="text/babel" src="./anonymity_app.js"></script>
>   </body>
>   </html>
>   
>   ```
>
>   ![image-20240923145849610](./assets/image-20240923145849610.png)
>

## 3.4.ç»„ä»¶çš„ç±»åˆ«

>   [!NOTE]
>
>   åæ§½ï¼šåº”ç”¨ä¸è¿‡å°±æ˜¯å¤§çš„ç»„ä»¶ç½¢äº†ï¼Œè¿™ä¸¤ä¸ªè¯æ··ç”¨æœ‰æ—¶å€™ä¹ŸæŒºåˆç†çš„...

`React` çš„ç»„ä»¶ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š

-   å‡½æ•°ç»„ä»¶ï¼Œä½¿ç”¨å‚æ•° `props` è·å¾—å±æ€§å€¼
-   ç±»ç»„ä»¶ï¼Œç»§æ‰¿è‡ª `React.Component.å±æ€§å­—æ®µ` ä½¿ç”¨ `this.props.å±æ€§å­—æ®µ` è·å–å±æ€§å€¼

### 3.4.1.å‡½æ•°ç»„ä»¶

```jsx
// anonymity_app.js: å®šä¹‰å‡½æ•°ç»„ä»¶
var aStyle = {
    fontSize: 100,
    color: '#FF0000'
};

// å®šä¹‰å‡½æ•°ç»„ä»¶
function Show(props) {
    return (
        <p className="elem" style={aStyle}>message: {props.message}{/* è¿™ä¸ª props å¯ä»¥ç”¨æ¥è¯»å–å±æ€§å€¼ */}</p>
    );
}

const root = ReactDOM.createRoot(document.getElementById("example"));
root.render(<Show message="This is a info message."/>); // è¿™é‡Œçš„ <Show message=""> ä¸­çš„ message å·²ç»æ˜¯ä¸€ä¸ª React åº”ç”¨çš„å±æ€§äº†, ä¸ç”¨ data- å‰ç¼€, è¿™ä¸ªå‰ç¼€æ˜¯åŠ ç»™ JSX çš„

```

```html
<!-- test.html: ä½¿ç”¨å‡½æ•°ç»„ä»¶ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="example"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

### 3.4.2.ç±»ç»„ä»¶

```jsx
// anonymity_app.js: å®šä¹‰ç±»ç»„ä»¶
var aStyle = {
    fontSize: 100,
    color: '#FF0000'
};

// å®šä¹‰ç±»ç»„ä»¶
class Show extends React.Component {
    render() { // render() ç”¨æ¥å®šä¹‰è¿”å›ç»„ä»¶çš„æ¸²æŸ“å†…å®¹
        return (
            <p className="elem" style={aStyle}>
                message: {this.props.message} {/* é€šè¿‡ this.props è®¿é—®å±æ€§å€¼ */}
            </p>
        );
    }
}

const root = ReactDOM.createRoot(document.getElementById("example"));
root.render(<Show message="This is a info message."/>); 

```

```jsx
<!-- test.html: ä½¿ç”¨ç±»ç»„ä»¶ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="example"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

>   [!CAUTION]
>
>   æ³¨æ„ï¼šåœ¨ `React18` ä¸­ï¼Œå‡½æ•°ç»„ä»¶ä¹Ÿå‡ ä¹æˆä¸ºäº†ä¸»æµï¼Œæˆ‘å»ºè®®æ‚¨ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼ˆè¿™ç§è¯´æ³•åªé€‚ç”¨äº `React16` åœ¨å‡½æ•°ç»„ä»¶ä¸­å¼•å…¥ `Hooks` ä¹‹åçš„ç‰ˆæœ¬ï¼‰ï¼Œå› æ­¤åç»­çš„å­¦ä¹ ä¸­ï¼Œå…³äºç±»ç»„ä»¶çš„éƒ¨åˆ†æˆ‘ä»…ä»…æ˜¯ç®€å•æåŠä¸€ä¸‹ï¼Œä¸åšè¿‡åˆ†æ·±å…¥ï¼Œä¼˜å…ˆå­¦ä¹ å‡½æ•°ç»„ä»¶...

>   [!TIP]
>
>   è¡¥å……ï¼šä¸¤ç§å†™æ³•è¯¥ä½¿ç”¨å“ªä¸€ç§å‘¢ï¼Ÿ
>
>   -   ç±»ç»„ä»¶æ”¯æŒè¾ƒæ—©ï¼Œå¯¹äºåç«¯å¼€å‘äººå‘˜æ¥è¯´æ˜“äºç†è§£
>   -   å‡½æ•°ç»„ä»¶æ”¯æŒè¾ƒæ™šï¼Œè¯­æ³•ç®€æ´é«˜æ•ˆï¼Œåœ¨åç»­å¼•å…¥ `Hooks` åå‡ ä¹å¯ä»¥å¹³æ›¿ç±»ç»„ä»¶

>   [!IMPORTANT]
>
>   è¡¥å……ï¼š`React åº”ç”¨` ä¸­å‡½æ•°ç»„ä»¶é€šå¸¸ä½¿ç”¨å¤§é©¼å³°æ³•ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ä¹Ÿå’Œå‡½æ•°åä¸€æ ·ã€‚

>   [!IMPORTANT]
>
>   è¡¥å……ï¼š`React åº”ç”¨` çš„ç»„ä»¶ä»¬ç›¸äº’ä¹‹é—´éƒ½æ˜¯æ— æ³•å¾—çŸ¥å¯¹æ–¹æ˜¯å¦æœ‰çŠ¶æ€è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œå› æ­¤çŠ¶æ€ç‹¬å±äºç»„ä»¶è‡ªå·±ï¼Œç®—æ˜¯ä¸€ç§å°è£…ï¼Œå¹¶ä¸”ä¹Ÿä¸å…³å¿ƒç»„ä»¶æ—¶å‡½æ•°ç»„ä»¶è¿˜æ˜¯ç±»ç»„ä»¶ï¼ˆè¿™æ„å‘³ç€å¯ä»¥æ··åˆä½¿ç”¨ï¼‰ï¼Œç»„ä»¶ä¹‹é—´åªæœ‰æ•°æ®æµçš„ä¼ é€’ï¼Œå¹¶ä¸”æ—¶è‡ªé¡¶å‘ä¸‹çš„å•å‘æ•°æ®æµåŠ¨ï¼ˆå­ç»„ä»¶è¦ä¿®æ”¹æ•°æ®åªèƒ½é€šè¿‡çˆ¶ç»„ä»¶è‡ªå·±çš„çŠ¶æ€è¿›è¡Œå˜åŒ–ï¼‰ã€‚
>
>   ```jsx
>   // anonymity_app.js: æ•°æ®æµåŠ¨æ–¹å‘
>   // å‡½æ•°å¼çš„å­ç»„ä»¶(æ°´ç»è¿‡çš„åœ°æ–¹ | æ•°æ®ç»è¿‡çš„åœ°æ–¹)
>   function FormattedDate(props) {
>       return <h2>ç°åœ¨æ˜¯ {props.date.toLocaleTimeString()}.</h2>;
>   }
>   
>   // ç±»å¼çš„çˆ¶ç»„ä»¶(æ°´æº | æ•°æ®æºå¤´)
>   class Clock extends React.Component {
>       constructor(props) {
>           super(props);
>           this.state = {date: new Date()};
>       }
>   
>       componentDidMount() {
>           this.timerID = setInterval(
>               () => this.tick(),
>               1000
>           );
>       }
>   
>       componentWillUnmount() {
>           clearInterval(this.timerID);
>       }
>   
>       tick() {
>           this.setState({
>               date: new Date()
>           });
>       }
>   
>       render() {
>           return (
>               <div>
>                   <h1>Hello, world!</h1>
>                   <FormattedDate date={this.state.date} />
>               </div>
>           );
>       }
>   }
>   
>   function App() {
>       return (
>           <div>
>               <Clock />
>           </div>
>       );
>   }
>   const root = ReactDOM.createRoot(document.getElementById("root"));
>   root.render(<App />);
>   ```
>
>   ```jsx
>   <!-- test.html: æ•°æ®æµåŠ¨æ–¹å‘ -->
>   <!DOCTYPE html>
>   <html lang="en">
>   <head>
>       <meta charset="UTF-8">
>       <meta name="viewport" content="width=device-width, initial-scale=1.0">
>       <title>React Test</title>
>       <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
>       <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
>       <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
>   </head>
>   <body>
>       <div id="root"></div>
>       <script type="text/babel" src="./anonymity_app.js"></script>
>   </body>
>   </html>
>   
>   ```

## 3.5.ç»„ä»¶çš„å¤åˆ

å¤šä¸ªç»„ä»¶å¯ä»¥å¤åˆåœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ª `React åº”ç”¨` å¯ä»¥å¤åˆå‡ºæ›´å¤æ‚çš„ `React åº”ç”¨`ï¼Œæˆ‘ä»¬è¿™é‡ŒæŠŠä¹‹å‰å®ç°çš„ä¸¤ä¸ªç»„ä»¶ ` Tick å’Œ Show` å¤åˆä¸ºä¸€ä¸ª `App` ç»„ä»¶ã€‚

```jsx
// anonymity_app.js: å®šä¹‰å¤åˆç»„ä»¶
var aStyle = {
    color: '#FF0000'
};

// ç¼–å†™ Tick åº”ç”¨
function Tick() {
    const tip = ReactDOM.createRoot(document.getElementById("tip"));

    const element = (
    <div>
        <h1>Hello, React!</h1>
        <h2>ç°åœ¨æ˜¯ {new Date().toLocaleTimeString()}.</h2>
    </div>
    );

    tip.render(element);
}

// ç¼–å†™ Show åº”ç”¨
function Show(props) {
    return (
        <p style={aStyle}>message: {props.message}</p>
    );
}

// ç¼–å†™ App åº”ç”¨
function App() {
    setInterval(Tick, 1000); // æ¯å— 1 s å°±è°ƒç”¨ Tick()
    return (
        <div>
            <div id="tip"></div>
            <div id="show"><Show message="This is a info message." /></div>
        </div>
    );
}

const app = ReactDOM.createRoot(document.getElementById("app"));
app.render(<App />); // è¿™é‡Œçš„ <Show message=""> ä¸­çš„ message å·²ç»æ˜¯ä¸€ä¸ª React åº”ç”¨çš„å±æ€§äº†, ä¸ç”¨ data- å‰ç¼€, è¿™ä¸ªå‰ç¼€æ˜¯åŠ ç»™ JSX çš„

```

```html
<!-- test.html: ä½¿ç”¨å¤åˆç»„ä»¶ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="app"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

![image-20240923173226947](./assets/image-20240923173226947.png)

## 3.6.ç»„ä»¶çš„çŠ¶æ€

`React` æŠŠç»„ä»¶çœ‹æˆæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œé€šè¿‡ä¸ç”¨æˆ·çš„äº¤äº’ï¼Œå®ç°ä¸åŒçŠ¶æ€ï¼Œç„¶åæ¸²æŸ“ `UI`ï¼Œè®©ç”¨æˆ·ç•Œé¢å’Œæ•°æ®ä¿æŒä¸€è‡´ã€‚

`React` é‡Œï¼Œåªéœ€æ›´æ–°ç»„ä»¶çš„ `state`ï¼Œç„¶åå°±æ ¹æ®æ–°çš„ `state` é‡æ–°æ¸²æŸ“ç”¨æˆ·ç•Œé¢ï¼ˆä¸è¦ç›´æ¥æ“ä½œ `DOM`ï¼‰ã€‚

>   [!NOTE]
>
>   åæ§½ï¼šæ‰€è°“çŠ¶æ€æœºä¹Ÿç®—æ˜¯ç¼–è¯‘åŸç†çš„æ¦‚å¿µï¼Œç¼–è¯‘åŸç†é‡Œæœ‰çŠ¶æ€å›¾çš„å®šä¹‰ï¼Œä¸€ä¸ªçŠ¶æ€å›¾å†…éƒ¨æœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰å¯èƒ½å‘ç”ŸçŠ¶æ€çš„å˜åŒ–ã€‚å› æ­¤æ•´ä¸ªå›¾å°±æ˜¯ä¸æ–­æŒç»­çŠ¶æ€çš„å˜åŒ–ï¼Œäº§ç”Ÿä¸åŒçš„ç»“æœï¼Œæ•´ä½“å°±å«åšä¸€ä¸ªçŠ¶æ€æœºï¼Œ`React` è¿™é‡Œä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œ`React` æŠŠä¸€ä¸ªåº”ç”¨çœ‹ä½œä¸€ä¸ªçŠ¶æ€æœºï¼Œä¼šæ ¹æ®æŸäº›äº¤äº’æ¥è¾¾åˆ°å†…éƒ¨çŠ¶æ€çš„å˜åŒ–ï¼ˆçŠ¶æ€çš„å˜åŒ–å…¶å®åŸºæœ¬å°±æ˜¯æ•°æ®çš„å˜åŒ–ï¼‰ï¼Œç„¶åè‡ªåŠ¨é‡æ–°æ¸²æŸ“åº”ç”¨ï¼Œè€Œæ— éœ€ç”¨æˆ·ç›´æ¥æ“ä½œ `DOM`ã€‚<div class="heimu"> ç”¨æˆ·åªéœ€è¦è€ƒè™‘æ•°æ®å˜åŒ–ï¼Œè€Œ `React` è€ƒè™‘çš„å¯å°±å¤šäº† ğŸ˜...</div>

### 3.6.1.å‡½æ•°ç»„ä»¶çš„çŠ¶æ€

`useState` å°±æ˜¯ç»„ä»¶çš„ä½¿ç”¨çŠ¶æ€ï¼Œè¿™æ˜¯ä¸€ä¸ª `Hook(é’©å­å‡½æ•°)`ï¼Œ`userState hook` å…è®¸å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚æˆ‘ä»¬å‰é¢ä¸æ˜¯æåˆ° `React` åˆ›å»ºçš„ `React å…ƒç´ ` æ˜¯ç”± `JSX` ç¼–å†™çš„ä¸€ç§ä¸å¯å˜å¯¹è±¡ä¹ˆï¼Ÿä½†æ˜¯æˆ‘ä»¬ä¸€æ—¦å‘ç”Ÿæ•°æ®æ”¹å˜ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰å°±éœ€è¦é‡æ–°æ‰‹åŠ¨æŒ‚è½½å¯¹è±¡ï¼Œè¿™æœªå…å¤ªè¿‡äºéº»çƒ¦ï¼Œå› æ­¤å°±æœ‰äº†ä¸Šé¢è¿™ä¸ªä¸€ä¸ªé’©å­å‡½æ•°ã€‚ç¼–å†™æ ¼å¼å¦‚ä¸‹ï¼Œæ¯æ¬¡è°ƒç”¨ä¿®æ”¹å‡½æ•°è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå°±ä¼šå¯¼è‡´å˜é‡è¢«ä¿®æ”¹ï¼Œå¹¶ä¸”è‡ªåŠ¨é‡æ–°æŒ‚è½½æœ¬ç»„ä»¶ï¼š

```jsx
const [å˜é‡, ä¿®æ”¹å‡½æ•°] = React.useState(åˆå§‹å€¼); // const è¡¨ç¤ºå˜é‡è¦ç”¨ä¿®æ”¹å‡½æ•°ä¿®æ”¹è€Œæ— æ³•ç›´æ¥è¢«èµ‹å€¼ä¿®æ”¹
```

æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè®¡æ—¶å™¨å¤åˆåˆ°æˆ‘ä»¬ä¹‹å‰çš„å¤åˆåº”ç”¨ä»£ç ä¸­ã€‚

```jsx
// anonymity_app.js: å‡½æ•°ç»„ä»¶çš„çŠ¶æ€
var aStyle = {
    color: '#FF0000'
};

// ç¼–å†™ Tick åº”ç”¨
function Tick() {
    const root = ReactDOM.createRoot(document.getElementById("tip"));

    const element = (
    <div>
        <h1>Hello, React!</h1>
        <h2>ç°åœ¨æ˜¯ {new Date().toLocaleTimeString()}.</h2>
    </div>
    );

    root.render(element);
}

// ç¼–å†™ Show åº”ç”¨
function Show(props) {
    return (
        <p style={aStyle}>message: {props.message}</p>
    );
}

// ç¼–å†™ Counter åº”ç”¨
function Counter() {
    const [count, setCount] = React.useState(0);

    return (
        <div>
        <p>Count: {count}</p>
        <button onClick={() => setCount(count + 1)}{/* JS ç»å¸¸å—ç”¨ç®­å¤´å‡½æ•°æ›¿ä»£å›è°ƒ */}>Increment</button>
        </div>
    );
}

// ç¼–å†™ App åº”ç”¨
function App() {
    setInterval(Tick, 1000); // æ¯å— 1 s å°±è°ƒç”¨ Tick()
    return (
        <div>
            <div id="tip"></div>
            <div id="show"><Show message="This is a info message." /></div>
            <div id="counter"><Counter /></div>
        </div>
    );
}

const root = ReactDOM.createRoot(document.getElementById("app"));
root.render(<App />); // è¿™é‡Œçš„ <Show message=""> ä¸­çš„ message å·²ç»æ˜¯ä¸€ä¸ª React åº”ç”¨çš„å±æ€§äº†, ä¸ç”¨ data- å‰ç¼€, è¿™ä¸ªå‰ç¼€æ˜¯åŠ ç»™ JSX çš„

```

```html
<!-- test.html: å‡½æ•°ç»„ä»¶çš„çŠ¶æ€ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="app"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

![image-20240923201734597](./assets/image-20240923201734597.png)

å¦å¤–æˆ‘ä»¬ä¹‹å‰ä¸æ˜¯æœ‰ä¸€ä¸ªéœ€è¦é‡å¤æŒ‚è½½çš„ `Tick` åº”ç”¨ä¹ˆï¼Œæ”¹å†™ä¸ºçŠ¶æ€çš„å†™æ³•è¯•è¯•ï¼Ÿ

```jsx
// anonymity_app.js: å‡½æ•°ç»„ä»¶çš„çŠ¶æ€
var aStyle = {
    color: '#FF0000'
};

// ç¼–å†™ Tick åº”ç”¨
function Tick() {
    const [time, setTime] = React.useState(new Date().toLocaleTimeString());
    
    // å‰¯ä½œç”¨é’©å­å‡½æ•°(ä¹‹å‰æ²¡ç”¨è¿‡)
    React.useEffect(() => {
        // ç»„ä»¶å°†æŒ‚è½½æ—¶è°ƒç”¨
        const interval = setInterval(() => { // è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨
            setTime(new Date().toLocaleTimeString()); // æ¯ç§’ä¿®æ”¹ä¸€æ¬¡æ—¶é—´
        }, 1000);
        
        return () => clearInterval(interval); // ç»„ä»¶å°†å¸è½½æ—¶è°ƒç”¨
    }, [/* ä¾èµ–é¡¹ */]);

    return (
        <div>
            <h1>Hello, React!</h1>
            <h2>ç°åœ¨æ˜¯ {time}.</h2>
        </div>
    );
}

// ç¼–å†™ Show åº”ç”¨
function Show(props) {
    return (
        <p style={aStyle}>message: {props.message}</p>
    );
}

// ç¼–å†™ Counter åº”ç”¨
function Counter() {
    const [count, setCount] = React.useState(0);

    return (
        <div>
            <p>Count: {count}</p>
            <button onClick={() => setCount(count + 1)}>Increment</button>
        </div>
    );
}

// ç¼–å†™ App åº”ç”¨
function App() {
    return (
        <div>
            <div id="tip"><Tick /></div>{/* å…¶å®è¿™é‡Œç›´æ¥å†™æ ‡ç­¾çš„å†™æ³•ä¹Ÿé—´æ¥è¯æ˜äº†ä¸€èˆ¬æŒ‚è½½ç‚¹åªæœ‰ä¸€ä¸ªå³å¯, æ²¡å¿…è¦åƒæˆ‘ä»¬ä¹‹å‰å†™çš„æŒ‚è½½ä¸¤æ¬¡ */}
            <div id="show"><Show message="This is a info message." /></div>
            <div id="counter"><Counter /></div>
        </div>
    );
}

const root = ReactDOM.createRoot(document.getElementById("app"));
root.render(<App />); // è¿™é‡Œçš„ <Show message=""> ä¸­çš„ message å·²ç»æ˜¯ä¸€ä¸ª React åº”ç”¨çš„å±æ€§äº†, ä¸ç”¨ data- å‰ç¼€, è¿™ä¸ªå‰ç¼€æ˜¯åŠ ç»™ JSX çš„

```

```html
<!-- test.html: å‡½æ•°ç»„ä»¶çš„çŠ¶æ€ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="app"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

![image-20240923201758853](./assets/image-20240923201758853.png)

### 3.6.2.ç±»ç»„ä»¶çš„çŠ¶æ€

åŒæ ·çš„ï¼Œç±»ç»„ä»¶ä¹Ÿæœ‰ç±»ä¼¼çš„æ“ä½œï¼Œå¹¶ä¸”å®é™…ä¸Šç±»ç»„ä»¶çš„çŠ¶æ€è¦æ¯”å‡½æ•°ç»„ä»¶çš„çŠ¶æ€è¦å…ˆæ¨å‡ºï¼Œä½†æ˜¯å†™èµ·æ¥å¯éº»çƒ¦äº†...ä¸Šè¿°å¤åˆåº”ç”¨ä»£ç å¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š

```jsx
// anonymity_app.js: ç±»ç»„ä»¶çš„çŠ¶æ€
var aStyle = {
    color: '#FF0000'
};

// ç¼–å†™ Tick ç±»ç»„ä»¶
class Tick extends React.Component {
    // æ„é€ å‡½æ•°
    constructor(props) {
        super(props);
        this.state = { time: new Date().toLocaleTimeString() }; // åˆå§‹çŠ¶æ€
    }

    // ç»„ä»¶å°†æŒ‚è½½
    componentDidMount() {
        this.interval = setInterval(() => {
            this.setState({ time: new Date().toLocaleTimeString() }); // è®¾ç½®çŠ¶æ€
        }, 1000);
    }

    // ç»„ä»¶å°†å¸è½½
    componentWillUnmount() {
        clearInterval(this.interval);
    }

    // è¿”å›
    render() {
        return (
            <div>
                <h1>Hello, React!</h1>
                <h2>ç°åœ¨æ˜¯ {this.state.time}.</h2>
            </div>
        );
    }
}

// ç¼–å†™ Show ç±»ç»„ä»¶
class Show extends React.Component {
    render() {
        return (
            <p style={aStyle}>message: {this.props.message}</p>
        );
    }
}

// ç¼–å†™ Counter ç±»ç»„ä»¶
class Counter extends React.Component { // å’Œä¸Šé¢çš„åº”ç”¨æ˜¯ç±»ä¼¼çš„
    constructor(props) {
        super(props);
        this.state = { count: 0 };
    }

    incrementCount = () => {
        this.setState({ count: this.state.count + 1 });
    };

    render() {
        return (
            <div>
                <p>Count: {this.state.count}</p>
                <button onClick={this.incrementCount}>Increment</button>
            </div>
        );
    }
}

// ç¼–å†™ App ç±»ç»„ä»¶
class App extends React.Component {
    render() {
        return (
            <div>
                <div id="tip"><Tick /></div>
                <div id="show"><Show message="This is a info message." /></div>
                <div id="counter"><Counter /></div>
            </div>
        );
    }
}

const root = ReactDOM.createRoot(document.getElementById("app"));
root.render(<App />);

```

```html
<!-- test.html: ç±»ç»„ä»¶çš„çŠ¶æ€ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="app"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼š`useEffect()` å‰¯ä½œç”¨é’©å­å‡½æ•°å’Œç±»ç»„ä»¶ä¸­çš„ `componentDidMount()` ä»¥åŠ `componentWillUnmount()` ç­‰ç±»ä¼¼ï¼Œå¹¶ä¸”åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œéƒ½æ˜¯æœ‰å…³ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°ã€‚

ä¸è¿‡ç±»ç»„ä»¶çš„å†™æ³•é€šå¸¸ä¼šè®©äººæ›´åŠ å®¹æ˜“ç†è§£ï¼Œæ¯•ç«Ÿç°åœ¨æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ—¶ä»£ã€‚æˆ‘ä»¬ç¨å¾®è§£é‡Šä¸‹ä¸Šè¿°çš„æ‰§è¡Œé¡ºåºï¼Œè¿™ä¸ªé¡ºåºä¹Ÿæœ‰åŠ©äºæ‚¨ç†è§£å‡½æ•°ç»„ä»¶çš„å¤§æ¦‚è°ƒç”¨é€»è¾‘ã€‚

1.  å½“ `<Tick />` é€šè¿‡ `<App />` ä¼ é€’ç»™ `ReactDOM.render()` æ—¶ï¼Œ`React` è°ƒç”¨ `Tick` ç»„ä»¶çš„æ„é€ å‡½æ•°ã€‚ç”±äº `Tick` éœ€è¦æ˜¾ç¤ºå½“å‰æ—¶é—´ï¼Œæ‰€ä»¥ä½¿ç”¨åŒ…å«å½“å‰æ—¶é—´çš„å¯¹è±¡æ¥åˆå§‹åŒ– `this.state`
2.  `React` ç„¶åè°ƒç”¨ `Tick` ç»„ä»¶çš„ `render()` æ–¹æ³•ï¼Œè¿™æ˜¯ `React` äº†è§£å±å¹•ä¸Šåº”è¯¥æ˜¾ç¤ºä»€ä¹ˆå†…å®¹ï¼Œç„¶å `React` æ›´æ–° `DOM` ä»¥åŒ¹é… `Clock` çš„æ¸²æŸ“è¾“å‡º
3.  å½“ `Tick` çš„è¾“å‡ºæ’å…¥åˆ° `DOM` ä¸­æ—¶ï¼Œ`React` è°ƒç”¨ `componentDidMount()` ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå…¶ä¸­ `Tick` ç»„ä»¶è¦æ±‚æµè§ˆå™¨è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯ç§’é’Ÿè°ƒç”¨ä¸€æ¬¡ `this.setState({ time: new Date().toLocaleTimeString() });` è®¾ç½®çŠ¶æ€
4.  `Tick` ç»„ä»¶é€šè¿‡ä½¿ç”¨åŒ…å«å½“å‰æ—¶é—´çš„å¯¹è±¡è°ƒç”¨ `setState()` æ¥è°ƒåº¦ `UI` æ›´æ–°ï¼Œé€šè¿‡è°ƒç”¨ `setState()` ï¼Œ`React` çŸ¥é“çŠ¶æ€å·²ç»æ”¹å˜ï¼Œå¹¶å†æ¬¡è°ƒç”¨ `render()` æ–¹æ³•æ¥ç¡®å®šå±å¹•ä¸Šåº”å½“æ˜¾ç¤ºä»€ä¹ˆï¼Œè¿™ä¸€æ¬¡ï¼Œ`render()` æ–¹æ³•ä¸­çš„ `this.state.date` å°†ä¸åŒï¼Œæ‰€ä»¥æ¸²æŸ“è¾“å‡ºå°†åŒ…å«æ›´æ–°çš„æ—¶é—´ï¼Œå¹¶ç›¸åº”åœ°æ›´æ–° `DOM`
5.  ä¸€æ—¦ `Tick` ç»„ä»¶è¢«ä» `DOM` ä¸­ç§»é™¤ï¼Œ`React` ä¼šè°ƒç”¨ `componentWillUnmount()` è¿™ä¸ªé’©å­å‡½æ•°ï¼Œå®šæ—¶å™¨ä¹Ÿå°±ä¼šè¢«æ¸…é™¤

## 3.7.ç»„ä»¶çš„å±æ€§

### 3.7.1.props çš„å•å±æ€§ä¼ é€’

ä¹‹å‰æåˆ°è¿‡ï¼Œç»„ä»¶ä¹‹é—´çš„å±æ€§å€¼ä¼ è¾“ä¾é çš„æ˜¯ `props`ï¼Œè¿™ä¸ªæˆ‘ä»¬ç”¨è¿‡å¾ˆå¤šæ¬¡äº†ï¼Œä¸è¿‡è¿™é‡Œç»†ç»†è®²è§£ä¸€ä¸‹ã€‚

```jsx
// anonymity_app.js: ä½¿ç”¨å¸¦æœ‰é»˜è®¤å€¼çš„å±æ€§
function HelloMessage({ name = 'limou' }) {
    return <h1>Hello, {name}</h1>;
}

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(
  <HelloMessage />
);

```

```html
<!-- test.html: ä½¿ç”¨å¸¦æœ‰é»˜è®¤å€¼çš„å±æ€§ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼šç±»ç»„ä»¶çš„å†™æ³•å¦‚ä¸‹
>
>   ```jsx
>   // anonymity_app.js: ä½¿ç”¨å¸¦æœ‰é»˜è®¤å€¼çš„å±æ€§
>   class HelloMessage extends React.Component {
>       render() {
>           return (
>           <h1>Hello, {this.props.name}</h1>
>           );
>       }
>   }
>   
>   HelloMessage.defaultProps = {
>       name: 'limou'
>   };
>      
>   const root = ReactDOM.createRoot(document.getElementById("root"));
>   
>   root.render(
>     <HelloMessage />
>   );
>   
>   ```

ç”šè‡³å¯ä»¥ä¼ é€’ï¼ˆå›è°ƒï¼‰å‡½æ•°ã€‚

```jsx
// anonymity_app.js: ä¼ é€’å‡½æ•°
// çˆ¶ç»„ä»¶
function Parent() {
    const handleClick = () => {
        alert('æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼');
    };

    return <Child onButtonClick={handleClick} />; // è¿™é‡Œçš„ onButtonClick åªæ˜¯ä¸ªè‡ªå®šä¹‰çš„å±æ€§å
}

// å­ç»„ä»¶
function Child({ onButtonClick }) {
    return <button onClick={onButtonClick}>ç‚¹å‡»æˆ‘</button>;
}

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(
    <Parent />
);

```

```html
<!-- test.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

### 3.7.2.props çš„å¤šå±æ€§ä¼ é€’

è€Œå¯ä»¥ä¼ é€’å¤šä¸ªå±æ€§äº¤ç»™å±æ€§è¿™ç‚¹ä¹‹å‰ä¹Ÿç”¨è¿‡ã€‚

```jsx
// anonymity_app.js: ä¼ é€’å¤šä¸ªå±æ€§
function HelloMessage(props) {
    return (
        <div>
            <h1>Hello, {props.name}</h1>
            <p>Age = {props.age}</p>
        </div>
    );
}

HelloMessage.defaultProps = {
    name: 'limou',
    age: '18'
};

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(
    <HelloMessage />
);


```

```html
<!-- test.html: ä¼ é€’å¤šä¸ªå±æ€§ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼šç±»ç»„ä»¶çš„å†™æ³•å¦‚ä¸‹
>
>   ```jsx
>   // anonymity_app.js: ä¼ é€’å¤šä¸ªå±æ€§
>   class HelloMessage extends React.Component {
>       render() {
>           return (
>               <div>
>                   <h1>Hello, {this.props.name}</h1>
>                   <p>Age = {this.props.age}</p>
>               </div>
>           );
>       }
>   }
>   
>   HelloMessage.defaultProps = {
>       name: 'limou',
>       age: '18'
>   };
>      
>   const root = ReactDOM.createRoot(document.getElementById("root"));
>   
>   root.render(
>     <HelloMessage />
>   );
>   
>   ```

### 3.7.3.props éšå¼è§£æ„å†™æ³•

```jsx
// anonymity_app.js: éšå¼è§£æ„å†™æ³•
function HelloMessage({name, age}) {
    return (
        <div>
            <h1>Hello, {name}</h1>
            <p>Age = {age}</p>
        </div>
    );
}

HelloMessage.defaultProps = {
    name: 'limou',
    age: '18'
};

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(
    <HelloMessage />
);


```

```html
<!-- test.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

## 3.8.ç»„ä»¶çš„äº‹ä»¶

`React` æä¾›äº†è®¸å¤šäº‹ä»¶ï¼ˆå…¶å®åº”è¯¥å« `JSX` çš„å±æ€§ï¼‰ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

1.  **åˆæˆäº‹ä»¶**
    *   `onClick` ç‚¹å‡»äº‹ä»¶
    *   `onChange` è¾“å…¥å­—æ®µå†…å®¹æ”¹å˜äº‹ä»¶
    *   `onSubmit` è¡¨å•æäº¤äº‹ä»¶
    *   `onMouseEnter` é¼ æ ‡è¿›å…¥äº‹ä»¶
    *   `onMouseLeave` é¼ æ ‡ç¦»å¼€äº‹ä»¶
2.  **é”®ç›˜äº‹ä»¶**
    *   `onKeyDown` æŒ‰ä¸‹é”®ç›˜äº‹ä»¶
    *   `onKeyPress` æŒ‰ä¸‹å­—ç¬¦é”®äº‹ä»¶
    *   `onKeyUp` æ¾å¼€é”®ç›˜äº‹ä»¶
3.  **ç„¦ç‚¹äº‹ä»¶**
    *   `onFocus` å…ƒç´ è·å¾—ç„¦ç‚¹äº‹ä»¶
    *   `onBlur` å…ƒç´ å¤±å»ç„¦ç‚¹äº‹ä»¶
4.  **è¡¨å•äº‹ä»¶**
    *   `onInput` è¾“å…¥äº‹ä»¶
    *   `onInvalid` è¾“å…¥æ— æ•ˆäº‹ä»¶
5.  **è§¦æ‘¸äº‹ä»¶**
    *   `onTouchStart` è§¦æ‘¸å¼€å§‹äº‹ä»¶
    *   `onTouchMove` è§¦æ‘¸ç§»åŠ¨äº‹ä»¶
    *   `onTouchEnd` è§¦æ‘¸ç»“æŸäº‹ä»¶
6.  **å…¶ä»–äº‹ä»¶**
    *   `onLoad` åŠ è½½äº‹ä»¶ï¼ˆå¦‚å›¾ç‰‡åŠ è½½å®Œæˆï¼‰
    *   `onError` é”™è¯¯äº‹ä»¶ï¼ˆå¦‚åŠ è½½å¤±è´¥ï¼‰

å¦å¤–ï¼Œ`React` çš„äº‹ä»¶å‘ç”Ÿåï¼Œå¯¹åº”çš„å›è°ƒå‡½æ•°åº”è¯¥ä½¿ç”¨ `{}` è¿›è¡Œï¼Œå¹¶ä¸”äº‹ä»¶åç§°å’Œå›è°ƒåç§°éƒ½æ˜¯é‡‡ç”¨å°é©¼å³°å‘½åæ³•ã€‚

```jsx
// anonymity_app.js: ä½¿ç”¨äº‹ä»¶å’Œå›è°ƒ
function ActionLink() {
    function handleClick(e) {
        e.preventDefault();
        alert('é“¾æ¥è¢«ç‚¹å‡»');
    }

    return (
        <a href="#" onClick={handleClick}>ç‚¹æˆ‘</a>
    );
}

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(
    <ActionLink />
);

```

```html
<!-- test.html: ä½¿ç”¨äº‹ä»¶å’Œå›è°ƒ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

ä¹Ÿå¯ä»¥å‘å›è°ƒä¼ é€’å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°è¾¾åˆ°è¿™ä¸€ç‚¹ã€‚

```jsx
// anonymity_app.js: å‘å›è°ƒä¼ é€’å‚æ•°
function ActionLink() {
    function handleClick(e, message) {
        e.preventDefault(); // è¿™ä¸ªè°ƒç”¨åé¢æœ‰è¡¥å……
        alert(message);
    }

    return (
        <a href="#" onClick={(e) => handleClick(e, 'é“¾æ¥åˆè¢«ç‚¹å‡»è¾£~')}>ç‚¹æˆ‘</a>
    );
}

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(
    <ActionLink />
);

```

```html
<!-- test.html: å‘å›è°ƒä¼ é€’å‚æ•° -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼šåœ¨ `React` ä¸­å¦ä¸€ä¸ªä¸åŒæ˜¯æ‚¨ä¸èƒ½ä½¿ç”¨è¿”å› `false` çš„æ–¹å¼é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œ ä½ å¿…é¡»æ˜ç¡®ä½¿ç”¨ `e.preventDefault()` æ‰å¯ä»¥ã€‚ä¾‹å¦‚é€šå¸¸æˆ‘ä»¬åœ¨ `HTML` ä¸­é˜»æ­¢é“¾æ¥é»˜è®¤æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š
>
>   ```html
>   <a href="#" onclick="console.log('ç‚¹å‡»é“¾æ¥'); return false">ç‚¹æˆ‘</a>
>   ```
>
>   ä½†æ˜¯æˆ‘ä»¬ä¹‹å‰çš„ä»£ç å´æ˜¯ä½¿ç”¨äº† `e.preventDefault()`ï¼Œè¿™ç‚¹æ‚¨äº†è§£ä¸€ä¸‹å°±å¥½ã€‚

## 3.9.ç»„ä»¶çš„ç”Ÿå‘½

ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåŸºæœ¬ä¹Ÿæ˜¯å‰ç«¯ç»„ä»¶è€ç”Ÿå¸¸è°ˆçš„ä¸œè¥¿äº†ï¼Œå­¦èµ·æ¥å’Œç†è§£èµ·æ¥å¹¶ä¸å›°éš¾ï¼Œç‰¹åˆ«æ˜¯æœ¬ç³»åˆ—æ–‡ç« åŸºæœ¬åªæ˜¯ç”¨å‡½æ•°ç»„ä»¶çš„æƒ…å†µä¸‹ã€‚

è¿™é‡Œæˆ‘ä¸å†æåŠè¾ƒå¤æ‚çš„ç±»å†™æ³•ï¼Œè€Œæ˜¯ç”¨ `Hook` å‡½æ•°é‡Œçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆä¸æ˜¯æ‰€æœ‰ `Hook` å‡½æ•°éƒ½æ˜¯ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼‰ï¼Œè¿™äº›å‡½æ•°é€šå¸¸ä»¥ `use` å¼€å¤´ã€‚

æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„ `useState(), useEffect()` çš„çŠ¶æ€æ›´æ–°å’Œå‰¯ä½œç”¨å‡½æ•°å°±æ˜¯æœ€ç»å…¸çš„ `Hook` å‡½æ•°ã€‚

`Hook` æ˜¯ç‰¹æ®Šçš„å‡½æ•°ï¼Œæ¯”æ™®é€šçš„å‡½æ•°è¦æ›´åŠ ä¸¥æ ¼ã€‚

`React` ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªä¸»è¦é˜¶æ®µï¼šæŒ‚è½½ã€æ›´æ–°ã€å¸è½½ï¼Œå¯¹åº”çš„ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œå‡½æ•°ç»„ä»¶çš„å‡½æ•°å¦‚ä¸‹ã€‚

### 3.9.1.ç»„ä»¶æŒ‚è½½

*   ç±»ç»„ä»¶
    *   `constructor()` åœ¨ `React` ç»„ä»¶æŒ‚è½½ä¹‹å‰ï¼Œä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œç”¨äºè®¾ç½®åˆå§‹çŠ¶æ€å’Œç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°
    *   `getDerivedStateFromProps()` åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ `props` æ—¶æ›´æ–° `state`ã€‚å®ƒåœ¨æ¯æ¬¡æ¸²æŸ“å‰éƒ½ä¼šè¢«è°ƒç”¨ï¼ŒåŒ…æ‹¬åˆæ¬¡æ¸²æŸ“
    *   `render()` è¯¥æ–¹æ³•æ˜¯ `class` ç»„ä»¶ä¸­å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•
    *   `componentDidMount()` åœ¨ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ `DOM` æ ‘ä¸­ï¼‰ç«‹å³è°ƒç”¨
*   å‡½æ•°ç»„ä»¶
    *   ä½¿ç”¨ `useEffect()` æ›¿ä»£

### 3.9.2.æ•°æ®æ›´æ–°

*   ç±»ç»„ä»¶
    *   `getDerivedStateFromProps()` å’Œä¸Šè¿°ä¸€æ ·
    *   `shouldComponentUpdate()` å½“ `props` æˆ– `state` å‘ç”Ÿå˜åŒ–æ—¶ä¼šåœ¨æ¸²æŸ“æ‰§è¡Œä¹‹å‰è¢«è°ƒç”¨ï¼Œç”¨äºæé«˜æ•ˆç‡
    *   `render()` å’Œä¸Šè¿°ä¸€æ ·
    *   `getSnapshotBeforeUpdate()` åœ¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“è¾“å‡ºï¼ˆæäº¤åˆ° `DOM` èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ `render()`ï¼‰ä¹‹å‰è°ƒç”¨ã€‚
    *   `componentDidUpdate()` åœ¨çŠ¶æ€æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨
*   å‡½æ•°ç»„ä»¶
    *   ä½¿ç”¨ `useEffect(() => { ... }, [dependencies])` å’Œ `React.memo` æ›¿ä»£

### 3.9.3.ç»„ä»¶å¸è½½

*   ç±»ç»„ä»¶
    *   `componentWillUnmount()`: åœ¨ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰ç›´æ¥è°ƒç”¨
*   å‡½æ•°ç»„ä»¶
    *   ä½¿ç”¨ `useEffect(() => { return () => { ... }; }, [])` æ›¿ä»£

ç›´æ¥è¯´æ˜æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå¿…é¡»ä½¿ç”¨ä»£ç æ¼”ç¤ºã€‚

```jsx
// anonymity_app.js: ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹æ¼”ç¤º
// å®šä¹‰ä¸€ä»½çŠ¶æ€çš„æ‹·è´
let copy = 0;

// è‡ªå®šä¹‰ç»„ä»¶
function MyComponent({ initialValue }) { // æ— éœ€æ¨¡æ‹Ÿ constructor() å‡½æ•°ç»„ä»¶å·²ç»è‡ªåŠ¨å¤„ç†å¥½
    const [count, setCount] = React.useState(initialValue);

    // 1.æŒ‚è½½ç»„ä»¶å’Œå¸è½½ç»„ä»¶

    React.useEffect(() => {
        // 1.1.æŒ‚è½½ç»„ä»¶
        // æ¨¡æ‹Ÿ componentDidMount()
        console.log('ç»„ä»¶æŒ‚è½½åè°ƒç”¨');

        // 1.2.å¸è½½ç»„ä»¶
        // æ¨¡æ‹Ÿ componentWillUnmount()
        return () => {
            console.log('ç»„ä»¶å¸è½½å‰è°ƒç”¨');
        };
    }, []); // ä¸ä¾èµ–ä»»ä½•å¯¹è±¡å°±å¯ä»¥è°ƒç”¨æœ¬ç®­å¤´å‡½æ•°

    // 2.çŠ¶æ€æ›´æ–°æˆ–å±æ€§æ›´æ–°
    
    // 2.1.çŠ¶æ€æ›´æ–°
    // æ¨¡æ‹Ÿ componentDidUpdate()
    React.useEffect(() => {
        console.log('ç»„ä»¶çŠ¶æ€æ›´æ–°åè°ƒç”¨', count);
        copy = count; // æ‹·è´ä¸€ä»½çŠ¶æ€
    }, [count]); // ä¾èµ–äº count æ›´æ–°æ—¶æ‰è°ƒç”¨æœ¬ç®­å¤´å‡½æ•°

    // 2.2.å±æ€§æ›´æ–°
    // æ¨¡æ‹Ÿ getDerivedStateFromProps()
    React.useEffect(() => {
        // æ£€æŸ¥ props çš„å˜åŒ–å¹¶æ›´æ–° state
        console.log('ç»„ä»¶å±æ€§æ›´æ–°åè°ƒç”¨', count); // åªè¦å¤–é¢ä¼ é€’çš„å±æ€§å€¼ä¸å˜å°±åªè§¦å‘ä¸€æ¬¡
    }, [initialValue]); // ä¾èµ–äº initialValue å˜åŒ–æ—¶æ‰è°ƒç”¨æœ¬ç®­å¤´å‡½æ•°

    // 3.æ¸²æŸ“ç»„ä»¶
    return (
        <div>
            <p>{'æ¸²æŸ“ç»„ä»¶ -->'} è®¡æ•°: {count}</p>
            <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
        </div>
    );
}

// 4.ä¼˜åŒ–ç»„ä»¶
const MemoizedMyComponent = React.memo(MyComponent, (prevProps, nextProps) => { // ä¼ é€’ç»„ä»¶å’Œè‡ªæ¯”è¾ƒå‡½æ•°, æ¨¡æ‹Ÿ shouldComponentUpdate()
    if (prevProps.initialValue === nextProps.initialValue) { // è¿™é‡Œè®¾ç½®ä¸ºåªæœ‰ initialValue å˜åŒ–æ—¶(ä¹Ÿå°±æ˜¯è¿”å›å‡), ç»„ä»¶æ‰ä¼šé‡æ–°æ¸²æŸ“, å› æ­¤ç”¨æˆ·å¯ä»¥æ§åˆ¶å±æ€§çš„æ”¹å˜å¸¦æ¥çš„æ¸²æŸ“
        console.log('ç»„ä»¶ä¸å…è®¸è¢«æ¸²æŸ“');
        return true;
    }
    else {
        console.log('ç»„ä»¶å…è®¸è¢«æ¸²æŸ“');
        return false;
    }
});

const root = ReactDOM.createRoot(document.getElementById("root"));

// åˆå§‹è®¾ç½® initialValue, ç¬¬ä¸€æ¬¡æ¸²æŸ“
root.render(
    <div>
        <MemoizedMyComponent initialValue={0} />
    </div>
); // åˆå§‹åŒ– initialValue

// éš” 3 ç§’é‡èµ‹ initialValue, ç¬¬äºŒæ¬¡æ¸²æŸ“
setTimeout(() => {
    root.render(
        <div>
            <MemoizedMyComponent initialValue={0} />
        </div>
    ); // ä¸å¯¹ initialValue è¿›è¡Œæ›´æ–°
}, 3000);

// éš” 6 ç§’æ›´æ–° initialValue, ç¬¬äºŒæ¬¡æ¸²æŸ“
setTimeout(() => {
    root.render(
        <div>
            <MemoizedMyComponent initialValue={10} />
        </div>
    ); // å°† initialValue æ›´æ–°ä¸º 10
}, 6000);

// éš” 9 ç§’å†æ¬¡æ›´æ–° initialValue, ç¬¬ä¸‰æ¬¡æ¸²æŸ“
setTimeout(() => {
    root.render(
        <div>
            <MemoizedMyComponent initialValue={20} />
        </div>
    ); // å°† initialValue æ›´æ–°ä¸º 20
}, 9000);

// æ¯éš” 12 ç§’åå¸è½½ç»„ä»¶
let intervalId = setInterval(() => {
    if (copy > 10) {
        root.unmount();
    } else {
        console.log('æœªæ»¡è¶³å¸è½½æ¡ä»¶, count çŠ¶æ€è¶…è¿‡ 10 æ‰å¯ä»¥é”€æ¯', copy);
    }
}, 12000);
```

```html
<!-- test.html: ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹æ¼”ç¤º -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼šä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ `memo()` åˆ›å»ºç»„ä»¶ã€‚
>
>   ```jsx
>   // anonymity_app.js: ç›´æ¥ä½¿ç”¨ memo() åˆ›å»ºç»„ä»¶
>   import React from 'react';
>   import ReactDOM from 'react-dom';
>   
>   const MyComponent = React.memo((props) => {
>       console.log('Rendering MyComponent');
>       return <div>{props.text}</div>;
>   }, (prevProps, nextProps) => {
>       return prevProps.text === nextProps.text;
>   });
>   
>   const App = () => {
>       const [count, setCount] = React.useState(0);
>       const [text, setText] = React.useState('Hello, world!');
>   
>       return (
>           <div>
>               <button onClick={() => setCount(count + 1)}>Increment Count</button>
>               <MyComponent text={text} />
>           </div>
>       );
>   };
>   
>   const root = ReactDOM.createRoot(document.getElementById('root'));
>   root.render(<App />);
>   ```

## 3.10.ç»„ä»¶çš„å…±äº«

ç»„ä»¶æœ‰æ—¶éœ€è¦å…±äº«æ•°æ®ï¼Œé€šå¸¸ `React` ä½¿ç”¨ç»„ä»¶ä»¬çš„å…±åŒçˆ¶ç»„ä»¶æ¥ä¸€èµ·å…±äº«æŸäº›æ•°æ®ï¼Œè¿™ç‚¹æ‚¨å¦‚æœå­¦ä¼šäº†ä¸Šè¿°ä»£ç çš„ç¼–å†™åº”è¯¥è¿˜æ˜¯æ¯”è¾ƒå»æ¸…æ¥šæ˜¯æ€ä¹ˆå›äº‹çš„ã€‚

![](./assets/imageurl=%252Fimages%252Fdocs%252Fdiagrams%252Fsharing_data_parent.dark.png)

![](./assets/imageurl=%252Fimages%252Fdocs%252Fdiagrams%252Fsharing_data_parent_clicked.dark.png)

# 4.React çš„æ¸²æŸ“

## 4.1.æ¡ä»¶æ¸²æŸ“

å¾—ç›Šäº `JSX` æ˜¯ `JS` æ‹“å±•è¯­æ³•ï¼Œ`React` çš„æ¡ä»¶æ¸²æŸ“å¼‚å¸¸ç®€å•ï¼Œåªéœ€è¦ä½¿ç”¨ `JS` çš„ `if-else` è¯­æ³•æˆ– `switch` å³å¯ï¼Œç”¨æˆ·ä¸éœ€è¦æœ‰è¿‡å¤šçš„å­¦ä¹ è´Ÿæ‹…ï¼ˆä¸€èˆ¬ä¹Ÿæ¨èä½¿ç”¨ `JS` çš„è¯­æ³•æ¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼‰ã€‚

```jsx
// anonymity_app.js: ä½¿ç”¨æ¡ä»¶æ¸²æŸ“
function UserGreeting() {
    return <h1>æ¬¢è¿å›æ¥</h1>;
}

function GuestGreeting() {
    return <h1>è¯·å…ˆç™»å½•</h1>;
}

function ButtonGreeting({ onClick, text }) {
    return <button onClick={onClick}>{text}</button>;
}

function Greeting(props) {
    const [isLoggedIn, setIsLoggedIn] = React.useState(props.flag);

    const switchGreeting = () => { // è¿™ç§å†™æ³•çš„å¥½å¤„å°±æ˜¯ä¸ç”¨æŠŠæœ¬è°ƒç”¨å†™åˆ°å¤–é¢, æ˜“äºå°è£…
        setIsLoggedIn(prev => !prev);
    };

    if(isLoggedIn) {
        return (
            <div>
                <ButtonGreeting onClick={switchGreeting} text='æ³¨é”€' />
                <UserGreeting />
            </div>
        );
    }
    else {
        return (
            <div>
                <ButtonGreeting onClick={switchGreeting} text='ç™»å½•' />
                <GuestGreeting />
            </div>
        );
    }
}

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(<Greeting flag={false} />); // æ³¨æ„è¿™é‡Œä¸€å®šè¦ä½¿ç”¨ {}, å¦åˆ™å°±ä¼šå¯¼è‡´è¯†åˆ«ä¸ºå­—ç¬¦ä¸², é»˜è®¤ä¼ é€’ä»»ä½•å­—ç¬¦ä¸²çš„è½¬åŒ–ç»“æœéƒ½æ˜¯ true

```

![image-20240925145032105](./assets/image-20240925145032105.png)

![image-20240925145038330](./assets/image-20240925145038330.png)

>   è¡¥å……ï¼šæˆ‘ä»¬å‰é¢è¿˜æè¿‡ä¸€ç§åœ¨ `JSX` çš„ `{}` å†…éƒ¨ä½¿ç”¨ä¸‰ç›®è¡¨è¾¾å¼çš„å†™æ³•ï¼Œè¿™ç§ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡ `{}` é‡Œé¢æ²¡åŠæ³•æ”¯æŒ `if-else` ç¡®å®æŒºé—æ†¾çš„...å¦å¤–è¿˜å¯ä»¥åœ¨ `{}` ä½¿ç”¨ `&&` æ¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼Œå¯ä»¥å†™å‡ºç±»ä¼¼ `{JSå˜é‡ && Reactç»„ä»¶}` è¿™ç§å†™æ³•ã€‚

>   è¡¥å……ï¼šæœ‰äº›æ—¶å€™æ‚¨å¯èƒ½åœ¨ç»„ä»¶å†…éƒ¨æ•°æ®å¤„ç†çš„é˜¶æ®µä¸­ï¼Œéœ€è¦éšè—ç»„ä»¶é˜²æ­¢ç»„ä»¶è¢«æ¸²æŸ“ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ `return null;` æ¥è¿›è¡Œè¿”å›ï¼Œè€Œä¸ç›´æ¥è¿”å›æœ‰æ•ˆçš„ `JSX` æ ‡ç­¾ã€‚
>
>   ```jsx
>   // é˜»æ­¢ç»„ä»¶æ¸²æŸ“
>   function WarningBanner(props) {
>       if (!props.warn) {
>           return null;
>       }
>   
>       return (
>       <div className="warning">
>           è­¦å‘Š!
>       </div>
>       );
>   }
>   ```
>
>   ä¸è¿‡è¿™ç§è¿”å› `null` çš„æ–¹å¼å¹¶ä¸ä¼šå½±å“è¯¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­çš„è°ƒç”¨ã€‚

## 4.2.åˆ—è¡¨æ¸²æŸ“

åŒæ ·å¾—ç›Šäº `JSX` æ˜¯ `JS` çš„æ‹“å±•ï¼Œè¿™é‡Œç®€å•æ¼”ç¤ºä¸€ä¸‹ã€‚

```jsx
// anonymity_app.js: ä½¿ç”¨åˆ—è¡¨æ¸²æŸ“
function MyComponent () {
    const items = ['Item 1', 'Item 2', 'Item 3'];
    return (
        <ul>{
            items.map((item, index) => (
                <li key={index}>{item}</li>
            ))
        }</ul>
    );
}

const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(<MyComponent initialValue={0} />);

```

```html
<!-- test.html: ä½¿ç”¨åˆ—è¡¨æ¸²æŸ“ -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>
</html>

```

![image-20240926092437052](./assets/image-20240926092437052.png)

# 5.React çš„è¡¨å•

ç”±äº `React åº”ç”¨` æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å¯¹è±¡ï¼Œè€Œè¡¨å•å…ƒç´ åœ¨ `HTML` å¤©ç„¶å°±æœ‰çŠ¶æ€çš„å˜åŒ–ï¼Œå› æ­¤ `React` çš„è¡¨å•å’Œ `HTML` çš„è¡¨å•æœ‰æ‰€iåŒºåˆ«ï¼ˆ`React` è™½ç„¶å¤æ‚ç‚¹ï¼Œä½†æ˜¯ä¸è¿èƒŒ `React` æ•´ä½“çš„è®¾è®¡ï¼Œä»ä»£ç å¯è¯»æ€§ä¸Šå˜å¥½äº†ï¼‰ã€‚

```html
<input type="text" value="Hello"/> <!-- ç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡æœ¬, è¾“å…¥çš„å†…å®¹ä¼šç«‹åˆ»åæ˜ åœ¨è¾“å…¥æ¡†ä¸­, è¿™æ˜¯ä¸€ç§çŠ¶æ€å˜åŒ– -->

```

ç”±äºè¡¨å•å…ƒç´ éœ€è¦æœ‰çŠ¶æ€å˜åŒ–ï¼Œå› æ­¤å°±éœ€è¦ `React åº”ç”¨` ä½¿ç”¨å’ŒçŠ¶æ€ç›¸å…³çš„è®¾ç½®ï¼Œæ‰èƒ½ç¼–å†™å‡ºç¬¦åˆ `React` è®¾è®¡çš„è¡¨å•å…ƒç´ ã€‚

## 5.1.å•è¡Œæ–‡æœ¬æ¡†

```jsx
// anonymity_app.js: å•è¡Œæ–‡æœ¬æ¡†
const HelloMessage = () => {
    const [value, setValue] = React.useState('Hello limou!'); // è®¾ç½®çŠ¶æ€å˜é‡å’Œä¿®æ”¹å‡½æ•°

    const handleChange = (event) => { // è®¾ç½®ä¸­é—´(const å¯ä»¥ç¡®ä¿ handleChange å›è°ƒä¸ä¼šå‘ç”Ÿå˜åŒ–)
        setValue(event.target.value);
    };

    return (
        <div>
            <input type="text" value={value} onChange={handleChange} />
            <p>{value}</p>
        </div>
    );
};

```

å¦‚æœå¸Œæœ›è¿›ä¸€æ­¥è¿›è¡Œè§£è€¦ï¼Œå¯ä»¥ç»§ç»­è¿™æ ·å†™ï¼š

```jsx
// anonymity_app.js: å•è¡Œæ–‡æœ¬æ¡†(è§£è€¦)
// Content ç»„ä»¶
const Content = ({ myDataProp, updateStateProp }) => {
    return (
        <div>
            <input type="text" value={myDataProp} onChange={updateStateProp} />
            <p>{myDataProp}</p>
        </div>
    );
};

// HelloMessage ç»„ä»¶
const HelloMessage = () => {
    const [value, setValue] = React.useState('Hello limou3434!');

    const handleChange = (event) => {
        setValue(event.target.value);
    };

    return (
        <div>
            <Content myDataProp={value} updateStateProp={handleChange} />{/* è¿™é‡Œçš„ updateStateProp æ˜¯è‡ªå®šä¹‰çš„, åªæ˜¯æŠŠä¿®æ”¹çŠ¶æ€çš„å‡½æ•°ä¼ é€’å‡ºå»ç»™å­ç»„ä»¶ä½¿ç”¨è€Œå·² */}
        </div>
    );
};

```

ä¸‹é¢å†æ¼”ç¤ºå‡ºå…¶ä»–çš„è¡¨å•ä¾‹å­ä¾›æ‚¨å‚è€ƒï¼Œå…¶ä¸­è¿˜æœ‰ä¸€äº›å€¼å¾—å­¦ä¹ çš„ä¾‹å­æˆ–å€¼å¾—å¤ä¹ çš„ `JS` çŸ¥è¯†ã€‚

```jsx
// anonymity_app.js: ä¸‹æ‹‰åˆ—è¡¨
const FlavorForm = () => {
    const [value, setValue] = React.useState('coconut'); // ä½¿ç”¨ useState åˆå§‹åŒ–çŠ¶æ€

    const handleChange = (event) => {
        setValue(event.target.value); // æ›´æ–°çŠ¶æ€
    };

    const handleSubmit = (event) => {
        alert('æ‚¨é€‰æ‹©çš„æ˜¯: ' + value); // å¼¹å‡ºå½“å‰é€‰æ‹©çš„å€¼
        event.preventDefault(); // é˜»æ­¢é»˜è®¤çš„è¡¨å•æäº¤è¡Œä¸º(ä½¿ç”¨ POST è®¿é—® http://127.0.0.1 å’Œåˆ·æ–°é¡µé¢)
    };

    return (
        <form action="http://127.0.0.1" method="POST" onSubmit={handleSubmit}> {/* ç‚¹å‡»æäº¤åè‡ªåŠ¨è°ƒç”¨ handleSubmit */}
            é€‰æ‹©æ‚¨æœ€å–œæ¬¢çš„ç½‘ç«™:
            <select value={value} onChange={handleChange}>
                <option value="gg">Google</option>
                <option value="bi">Bing</option>
                <option value="dd">DuckDuckGo</option>
                <option value="bd">Baidu</option>
            </select>
            <input type="submit" value="æäº¤" />
        </form>
    );
};

```

```jsx
// anonymity_app.js: å•é€‰æ¡†å’Œæ•°å­—é€‰æ‹©å™¨
const Reservation = () => {
    const [isGoing, setIsGoing] = React.useState(true); // ç®¡ç†æ˜¯å¦ç¦»å¼€çŠ¶æ€
    const [numberOfGuests, setNumberOfGuests] = React.useState(0); // ç®¡ç†è®¿å®¢æ•°çŠ¶æ€

    const handleInputChange = (event) => {
        console.log("Value:", event.target.value);
        console.log("Checked:", event.target.hecked);
        console.log("Name:", event.target.name);
        console.log("Type:", event.target.type);
        console.log("ID:", event.target.id);
        console.log("Class Name:", event.target.className);

        const { name: myName, type: myType, value: myValue, checked: myChecked } = event.target;  // const { name, type, value, checked } = event.target; è¿™é‡Œä½œäº†ä¸€ä¸ªé‡å‘½åçš„æ“ä½œ

        // æ ¹æ®è¾“å…¥ç±»å‹æ›´æ–°çŠ¶æ€
        if (myName === 'checkbox_isGoing') { // å¯ä»¥ä½¿ç”¨ name åˆ¤æ–­ä¹Ÿå¯ä»¥ä½¿ç”¨ type åˆ¤æ–­, å…·ä½“å–å†³äºæ‚¨
            setIsGoing(myChecked);
        } else {
            setNumberOfGuests(myValue);
        }
    };

    return (
        <form>
            <label>
                æ˜¯å¦ç¦»å¼€:
                <input
                    name="checkbox_isGoing"
                    type="checkbox"
                    checked={isGoing}
                    onChange={handleInputChange}
                />
            </label>

            <br />

            <label>
                è®¿å®¢æ•°:
                <input
                    name="number_numberOfGuests"
                    type="number"
                    value={numberOfGuests}
                    onChange={handleInputChange}
                />
            </label>
        </form>
    );
};
```

> [!WARNING]
>
> æ³¨æ„ï¼šåé¢å¼€å§‹æˆ‘å‡ ä¹ä¸ä¼šåœ¨å†™å‡ºæ•´ä¸ªæŒ‚è½½çš„è¿‡ç¨‹ï¼Œåªå†™å‡ºå„ä¸ªç»„ä»¶çš„ `jsx` ä»£ç ä»¥æé«˜æœ¬æ–‡æ¡£çš„ç®€æ´æ€§...

# 6.React çš„å¼•ç”¨

## 6.1.å¼•ç”¨ JSX åŸç”Ÿæ ‡ç­¾

`React` ä¸­çš„ `JSX` æ ‡ç­¾å¯ä»¥å€ŸåŠ©å¼•ç”¨æ¥è·å–ï¼Œè€Œä¸å†éœ€è¦åŸç”Ÿçš„ `JS` è¿›è¡Œæ ‡ç­¾æŸ¥æ‰¾ã€‚è€Œè¿™é‡Œçš„ `React ref` å®åˆ™æ˜¯ä¸€ç§å¯¹è±¡çš„å®ä¾‹åŒ–ï¼Œå› æ­¤å†…éƒ¨æœ‰è®¸å¤šçš„å±æ€§å¯ä»¥è¢«ä½¿ç”¨ï¼Œå…¶ä¸­ `current` å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚

```jsx
// ä½¿ç”¨ JS çš„æŸ¥è¯¢
const MyComponent = () => {
    const handleClick = () => {
        const input = document.querySelector('input[type="text"]');
        input.focus();
    };

    return (
        <div>
            <input type="text" />
            <input type="button" value="ç‚¹æˆ‘æ—¶, è¾“å…¥æ¡†è·å–ç„¦ç‚¹" onClick={handleClick} />
        </div>
    );
};

```

```jsx
// ä½¿ç”¨ JSX çš„å¼•ç”¨
const MyComponent = () => {
    const myInputRef = React.useRef(null); // åˆ›å»ºä¸€ä¸ª ref

    const handleClick = () => {
        myInputRef.current.focus();
    };

    return (
        <div>
            <input type="text" ref={myInputRef} /> {/* è¿™æ ·åç»­ä½¿ç”¨ myInputRef çš„æ—¶å€™å°±ç›¸å½“äºä½¿ç”¨è¿™ä¸€æ¡ JSX æ ‡ç­¾ */}
            <input type="button" value="ç‚¹æˆ‘æ—¶, è¾“å…¥æ¡†è·å–ç„¦ç‚¹" onClick={handleClick} />
        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<MyComponent />);

```

## 6.2.å¼•ç”¨ React è‡ªå®šä¹‰ç»„ä»¶

è¿˜å¯ä»¥é€šè¿‡ `useImperativeHandle Hook` æ¥æŠŠå·²å°è£…å¥½çš„ `React` å­ç»„ä»¶å†…éƒ¨æ–¹æ³•æš´éœ²ç»™å¤–ç•Œï¼Œè¿™æ ·å¤–ç•Œå°±å¯ä»¥é€šè¿‡ä½¿ç”¨ç»„ä»¶å®ä¾‹çš„å¼•ç”¨ï¼Œæ¥è·å–å†…éƒ¨çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚ä¸è¿‡ï¼Œè¿™ç§æš´éœ²çš„åšæ³•è¿˜éœ€è¦æŠŠå­ç»„ä»¶æ•´ä½“ä¼ å…¥ `React.forwardRef((props, ref) => {})` ä¸­ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä½¿å¾—ä¼ å…¥çš„ `ref` èƒ½å¤Ÿè¢«è½¬å‘ç»™å­ç»„ä»¶çš„å†…éƒ¨ï¼Œè®©çˆ¶ç»„ä»¶é€šè¿‡ `ref` ç›´æ¥å¼•ç”¨å­ç»„ä»¶æˆ–ä½¿ç”¨å…¶å†…éƒ¨çš„æ–¹æ³•ã€‚

```jsx
// ä½¿ç”¨å¼•ç”¨æ¥è°ƒç”¨ç»„ä»¶å®ä¾‹ä¸­å¯¹å¤–æš´éœ²çš„æ–¹æ³•
const ChildComponent = React.forwardRef((props, ref) => {
    const inputRef = React.useRef(null);

    React.useImperativeHandle(ref, () => ({ // useImperativeHandle Hook å…è®¸å…è®¸æ‚¨è‡ªå®šä¹‰å­ç»„ä»¶å¯å¯¹å¤–æä¾›çš„æ–¹æ³•, è¿™æ ·å°±ä¸ä¼šç›´æ¥æš´éœ²æ•´ä¸ªç»„ä»¶å®ä¾‹
        focusInput() {
            inputRef.current.focus();
        },
    }));

    return <input type="text" ref={inputRef} />;
});

const ParentComponent = () => {
    const childRef = React.useRef(null);

    const handleClick = () => {
        if (childRef.current) {
            childRef.current.focusInput(); // è°ƒç”¨ ChildComponent ç»„ä»¶ä¸­çš„ focusInput() æ–¹æ³•
        }
    };

    return (
        <div>
            <ChildComponent ref={childRef} />
            <button onClick={handleClick}>Focus Child Input</button>
        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<ParentComponent />);

```

> [!IMPORTANT]
>
> è¡¥å……ï¼šéƒ½å¯ä»¥ä¼ é€’å‡½æ•°

# 6.React çš„æ ·å¼

`React` çš„æ ·å¼å¯ä»¥ä» `JSX` çš„æ ·å¼å±æ€§ `style` å¼€å§‹ï¼Œ`<x style={å¡«å…¥ä¼ ç»Ÿçš„cssæ ·å¼/csså˜é‡}><x/>` å°±å¯ä»¥åº”ç”¨ `css`ã€‚

```jsx
// ä½¿ç”¨å†…è”æ ·å¼
const MyComponent = () => {
    const [isHighlighted, setIsHighlighted] = React.useState(false);

    const containerStyle = {
        padding: '20px',
        backgroundColor: isHighlighted ? '#ffff99' : '#f0f0f0'
    };

    const titleStyle = {
        fontSize: '24px',
        color: '#333'
    };

    return (
        <div style={containerStyle}>
            <h1 style={titleStyle}>Hello, world!</h1>
            <button onClick={() => setIsHighlighted(!isHighlighted)}>ç‚¹å‡»é«˜äº®/ç‚¹å‡»å–æ¶ˆ</button>
        </div>
    );
};

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼šä¸Šè¿°çš„ `css` éƒ½æ˜¯ä½¿ç”¨å¤§é©¼å³°æ‰èƒ½åšåˆ°ï¼Œä¸‹é¢éƒ½æ˜¯ä½¿ç”¨åŸç”Ÿçš„ `css`ã€‚

-   ä¹Ÿå¯ä»¥æŠŠ `css` å°è£…ä¸º `css` æ–‡ä»¶ï¼Œé€šè¿‡ `css` é€‰æ‹©å™¨æ¥èµ‹äºˆ `jsx` æ ‡ç­¾æ ·å¼ï¼Œå†ä½¿ç”¨ ` <link rel="stylesheet" href="./App.css">` è¿›è¡Œå¯¼å…¥ï¼ˆ`Node.js` ç­‰åŒ…ç®¡ç†ç¯å¢ƒåˆ™å¯ä»¥ä½¿ç”¨ `import` å¼•å…¥ï¼‰
-   è€Œå¦å¤–ä¸€ç§å°±æ˜¯ä½¿ç”¨ `css æ¨¡å—`ï¼Œé€‰æ‹©å™¨å¯ä»¥ä½¿ç”¨ `.ç»„ä»¶{}` çš„å½¢å¼æ¥èµ‹äºˆä¸€ä¸ªå•ç‹¬ç»„ä»¶çš„æ ·å¼

```css
/* App.css */
body {
  background-color: #282c34;
  color: white;
  padding: 40px;
  font-family: Sans-Serif;
  text-align: center;
}
```

```cpp
// ä½¿ç”¨å¤–è”æ ·å¼
const Header = () => {
  return (
    <div>
      <h1>Hello Style!</h1>
      <p>Add a little style!.</p>
    <div/>
  );
}
```

>   è¡¥å……ï¼šè¿˜æœ‰ä¸€ä¸ª `React Sass` æ˜¯ `css` çš„æ‹“å±•ï¼ˆæ¯”å¦‚å˜é‡ã€åµŒå¥—è§„åˆ™ã€æ··å…¥ã€å‡½æ•°ç­‰ç­‰ï¼‰ï¼Œä»¥åŠ `React Tailwind CSS` çš„ `css` æ¡†æ¶ã€‚ä½†é€šè¿‡é“¾æ¥å¼•å…¥çš„å½¢å¼ä¸å¥½æ¼”ç¤ºï¼Œåé¢è¡¥å……...

# 7.React çš„è·¯ç”±

## 7.1.æ™®é€šè·¯ç”±

è¿™é‡Œä¹Ÿç»™ä¸€ä¸ªæœ‰æ•ˆçš„è¿æ¥ä¾›æ‚¨ä½¿ç”¨ï¼Œè¿™æ˜¯ä½¿ç”¨ `React` è·¯ç”±å¿…é¡»è¦å¼•å…¥çš„ `js` åº“ï¼ˆæš‚æ—¶å¼•å…¥ `React Router v5` å› ä¸ºï¼Œæ›´é«˜ç‰ˆæœ¬çš„ä¸å¥½æ‰¾ `JS` æºä»£ç ï¼‰ã€‚

```html
<script src="https://unpkg.com/react-router-dom@5/umd/react-router-dom.min.js"></script>
```

ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œå’Œ `Vue` çš„æ²¡ä»€ä¹ˆå·®åˆ«ã€‚

```jsx
// App.js: å±•å¼€å†™æ³•
function Home() {
    return <h2>Home Page</h2>;
}

function About() {
    return <h2>About Page</h2>;
}

function NotFound() {
    return <h2>404 Not Found</h2>;
}

function App() {
    return (
        <window.ReactRouterDOM.BrowserRouter basename="/Test.html"> {/* <æµè§ˆå™¨è·¯ç”±æ ‡ç­¾> */}
            <div>
                <nav><ul>
                    <li><window.ReactRouterDOM.Link to="/">Home</window.ReactRouterDOM.Link></li> {/* <é“¾æ¥æ ‡ç­¾> */}
                    <li><window.ReactRouterDOM.Link to="/about">About</window.ReactRouterDOM.Link></li>
                </ul></nav>

                <window.ReactRouterDOM.Switch> {/* <åˆ‡æ¢æ ‡ç­¾> */}
                    <window.ReactRouterDOM.Route path="/" exact component={Home} /> {/* <è·¯ç”±æ ‡ç­¾> */}
                    <window.ReactRouterDOM.Route path="/about" component={About} />
                    <window.ReactRouterDOM.Route component={NotFound} /> {/* "å…œåº•"çš„è·¯ç”± */}
                </window.ReactRouterDOM.Switch>
            </div>
        </window.ReactRouterDOM.BrowserRouter>
    );
}

```

```jsx
// App.js: ç»“æ„å†™æ³•
function Home() {
    return <h2>Home Page</h2>;
}

function About() {
    return <h2>About Page</h2>;
}

function NotFound() {
    return <h2>404 Not Found</h2>;
}

const { BrowserRouter, Switch, Route, Link } = window.ReactRouterDOM;

function App() {
    return (
        <BrowserRouter basename="/Test.html">
            <div>
                <nav><ul>
                    <li><Link to="/">Home</Link></li>
                    <li><Link to="/about">About</Link></li>
                </ul></nav>

                <Switch>
                    <Route path="/" exact component={Home} />
                    <Route path="/about" component={About} />
                    <Route component={NotFound} />
                </Switch>
            </div>
        </BrowserRouter>
    );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
```

> [!IMPORTANT]
>
> è¡¥å……ï¼šåœ¨ä½¿ç”¨ `<script>` æ ‡ç­¾å¼•å…¥åº“æ—¶ï¼ˆå¦‚ `react-router-dom`ï¼‰ï¼Œè¿™äº›åº“ä¼šè¢«åŠ è½½åˆ°å…¨å±€å¯¹è±¡ `window` ä¸­ï¼Œ`window` åŒ…å«äº†æ‰€æœ‰å…¨å±€å˜é‡å’Œå‡½æ•°ã€‚`const { BrowserRouter, Switch, Route, Link } = window.ReactRouterDOM;` å…¶å®æ˜¯ä¸€ä¸ªè§£æ„èµ‹å€¼çš„è¯­å¥ï¼Œä» `window.ReactRouterDOM` å¯¹è±¡ä¸­æå–å‡º `BrowserRouter, Switch, Route, Link` å››ä¸ªå±æ€§ã€‚

> [!IMPORTANT]
>
> è¡¥å……ï¼š`React Router v5` ä½¿ç”¨ `Switch+component`, ä½†æ˜¯ `React Router v6` ä½¿ç”¨ `Routes+element` ç­‰æˆ‘ä¹‹åä½¿ç”¨è„šæ‰‹æ¶åå†æ¥é‡‡ç”¨è¿™ç§åšæ³•ï¼Œåè€…è¯­ä¹‰ä¸Šæ›´åŠ æ˜æ˜¾ï¼Œå¹¶ä¸” `element` è¦æ¯” `component` æ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥ä»¥ `React åº”ç”¨` çš„æ–¹å¼æ¥ä¼ å…¥é¡µé¢ï¼Œæ›´åŠ ç¬¦åˆæ•´ä½“è®¾è®¡ã€‚é™¤æ­¤ä»¥å¤–ï¼Œä½¿ç”¨æ–°ç‰ˆæœ¬çš„ `element` è¿˜èƒ½æ–¹ä¾¿ç”¨æˆ·ä¼ é€’å±æ€§ï¼Œè¿™äº›æˆ‘ä»¬ä»¥åæåŠ...

## 7.2.åµŒå¥—è·¯ç”±

è¿˜å¯ä»¥ä½¿ç”¨åµŒå¥—çš„è·¯ç”±ï¼Œä¸è¿‡ `React Router v5` å’Œ `React Router v6` çš„å†™æ³•æœ‰äº›ä¸åŒï¼Œæˆ‘ä»¬å…ˆå±•ç¤ºå‰ä¸€ç§ç‰ˆæœ¬çš„å†™æ³•ï¼Œåä¸€ç§æˆ‘ä»¬ä»¥åå†æ¥...

```jsx
// App.js: åµŒå¥—è·¯ç”±
function Home() {
    return <h2>Home Page</h2>;
}

function About() {
    return <h2>About Page</h2>;
}

function Blog() {
    return (
        <div>
            <h2>Blog Page</h2>
            <nav>
                <ul>
                    <li><Link to="/blog/text1">Text 1</Link></li>
                    <li><Link to="/blog/text2">Text 2</Link></li>
                </ul>
            </nav>
            <Switch> {/* React Router v5 çš„åµŒå¥—è·¯ç”±å¦‚æœå†…éƒ¨ç»„ä»¶ä¼ é€’å±æ€§åªèƒ½è¿™ä¹ˆå†™ */}
                <Route path="/blog/text1" render={() => <Text customProp="Text 1 Content" />} />
                <Route path="/blog/text2" render={() => <Text customProp="Text 2 Content" />} />
            </Switch>
        </div>
    );
}

function Text({ customProp }) {
    return <h2>{customProp}</h2>;
}

function NotFound() {
    return <h2>404 Not Found</h2>;
}

const { BrowserRouter, Switch, Route, Link } = window.ReactRouterDOM;

function App() {
    return (
        <BrowserRouter basename="/Test.html">
            <div>
                <nav>
                    <ul>
                        <li><Link to="/">Home</Link></li>
                        <li><Link to="/blog">Blog</Link></li>
                        <li><Link to="/about">About</Link></li>
                    </ul>
                </nav>

                <Switch>
                    <Route path="/" exact component={Home} />
                    <Route path="/blog" component={Blog} />
                    <Route path="/about" component={About} />
                    <Route component={NotFound} />
                </Switch>
            </div>
        </BrowserRouter>
    );
}

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼š`Route` ç»„ä»¶çš„ `render()` å…è®¸ä½ åœ¨åŒ¹é…åˆ°æŸä¸ªè·¯å¾„æ—¶æ¸²æŸ“ä¸€ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”å¯ä»¥å°† `Route` çš„è·¯ç”±å‚æ•°ç­‰ä¿¡æ¯ï¼ˆå¦‚ `match`, `location`, `history`ï¼‰ä¼ é€’ç»™è¯¥ç»„ä»¶ã€‚åŒæ ·çš„ï¼Œ`React Router v5` å’Œ `React Router v6` ä¹Ÿæœ‰ç¼–å†™ä¸Šçš„åŒºåˆ«ï¼Œä»¥åæåŠã€‚ 

## 7.3.ä¼ å‚è·¯ç”±

```jsx
// App.js: ä¼ é€’è·¯ç”±å‚æ•°
function Home() {
    return <h2>Home Page</h2>;
}

function About() {
    return <h2>About Page</h2>;
}

function Blog() {
    return (
        <div>
            <h2>Blog Page</h2>
            <nav>
                <ul>
                    <li><Link to="/blog/text/1">Text 1</Link></li>
                    <li><Link to="/blog/text/2">Text 2</Link></li>
                </ul>
            </nav>
            <Switch> {/* React Router v5 çš„åµŒå¥—è·¯ç”±å¦‚æœå†…éƒ¨ç»„ä»¶ä¼ é€’å±æ€§åªèƒ½è¿™ä¹ˆå†™ */}
                <Route path="/blog/text/:id" render={({ match }) => <Text id={match.params.id} />} />
            </Switch>
        </div>
    );
}

function Text({ id }) {
    return <h2>{`Text ${id} Content`}</h2>;
}

function NotFound() {
    return <h2>404 Not Found</h2>;
}

const { BrowserRouter, Switch, Route, Link } = window.ReactRouterDOM;

function App() {
    return (
        <BrowserRouter basename="/Test.html">
            <div>
                <nav>
                    <ul>
                        <li><Link to="/">Home</Link></li>
                        <li><Link to="/blog">Blog</Link></li>
                        <li><Link to="/about">About</Link></li>
                    </ul>
                </nav>

                <Switch>
                    <Route path="/" exact component={Home} />
                    <Route path="/blog" component={Blog} />
                    <Route path="/about" component={About} />
                    <Route component={NotFound} />
                </Switch>
            </div>
        </BrowserRouter>
    );
}

```

>   [!IMPORTANT]
>
>   è¡¥å……ï¼š å¦å¤–è¿˜æœ‰ä¸€ä¸ªå…³äºè·¯ç”±é‡å®šå‘çš„åŠŸèƒ½å°±æ˜¯ä½¿ç”¨ `Navigate`ï¼Œä¸è¿‡ `Navigate` æ˜¯ `React Router v6` ä¸­æ‰å¼•å…¥çš„ç»„ä»¶ã€‚åœ¨ `v5` ä¸­ï¼Œå¦‚æœè¦å®ç°ç±»ä¼¼çš„å¯¼èˆªé‡å®šå‘è·³è½¬ï¼Œå¯ä»¥ä½¿ç”¨ `<Redirect>` æ¥æ›¿ä»£ã€‚

# 8.React çš„ Ajax

å…³äº `Ajax` çš„ä½¿ç”¨ï¼Œåœ¨ `Vue` ä¸­å·²ç»ç”¨è¿‡å¾ˆå¤šï¼Œè¿™é‡Œåªç»™ä¸€ä¸ªç®€å•çš„ä¾‹å­ä½œä¸ºæ¼”ç¤ºï¼Œç›´æ¥ä½¿ç”¨ `Axios` ç»„ä»¶è€Œä¸æ˜¯ç”¨åŸç”Ÿçš„ç»„ä»¶ã€‚

```html
<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
```

æˆ‘ä»¬å…ˆç®€å•ä½¿ç”¨ `ajax` å‘ `node` æœåŠ¡åŒºå‘é€ `get` è¯·æ±‚ï¼Œç„¶åå¤„ç†æ•°æ®æˆ–é”™è¯¯ã€‚

```js
// server.js: åœ¨å…·æœ‰å…¬ç½‘çš„æœåŠ¡å™¨ä¸­è¿è¡Œ node æœåŠ¡å™¨
const http = require('http');

const host = '0.0.0.0';
const port = 8087;

const server = http.createServer((req, res) => {
    const clientIp = req.connection.remoteAddress;
    console.log(`Request from IP: ${clientIp}`);

    res.setHeader('Access-Control-Allow-Origin', '*'); // å…è®¸æ‰€æœ‰æ¥æº(é˜²æ­¢è·¨åŸŸé—®é¢˜)
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello\n');
});

server.listen(port, host, () => {
    console.log(`Server running at http://${host}:${port}/`);
});

server.on('error', (err) => {
    console.error('Server error:', err);
});

```

```jsx
// anonymity_app.js: ç¼–å†™å…³äº ajax çš„ç»„ä»¶ä»£ç 
const MyComponent = () => {
    const [message, setMessage] = React.useState(null); // è®¾ç½®å“åº”æ¶ˆæ¯
    const [error, setError] = React.useState(null);
    const [loading, setLoading] = React.useState(true);

    React.useEffect(() => {
        const fetchData = async () => { // async å’Œ await
            try {
                const response = await axios.get('http://æ‚¨æ‰€æ‹¥æœ‰çš„å…¬ç½‘ipåœ°å€:8087'); // è¯·æ±‚ Node.js æœåŠ¡å™¨(è¿™é‡Œå°±ç”¨åˆ°äº† axios)
                setMessage(response.data); // è·å–æœåŠ¡å™¨è¿”å›çš„æ–‡æœ¬
            } catch (error) {
                console.error('Error fetching data:', error);
                setError('Error fetching data');
            } finally {
                setLoading(false); // è¯·æ±‚ç»“æŸåè®¾ç½® loading ä¸º false
            }
        };

        fetchData();
    }, []);

    if (loading) {
        return <div>Loading...</div>; // åŠ è½½çŠ¶æ€
    }

    if (error) {
        return <div>{error}</div>; // é”™è¯¯ä¿¡æ¯
    }

    return (
        <div>
            <h1>Server Response:</h1>
            <pre>{message}</pre> {/* æ˜¾ç¤ºæœåŠ¡å™¨è¿”å›çš„æ–‡æœ¬ */}
        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<MyComponent />);

```

```html
<!-- test.html: ä½¿ç”¨ ajax è¿›è¡Œç½‘ç»œé€šä¿¡ -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel" src="./anonymity_app.js"></script>
</body>

</html>
```

![image-20240928113837252](./assets/image-20240928113837252.png)

å…³äºå…¶ä»– `ajax` å…¶ä»–çš„çŸ¥è¯†åœ¨è¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚

# 9.React çš„æ ¡éªŒ

```html
<script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/prop-types/15.8.1/prop-types.min.js" type="application/javascript"></script>
```

è™½ç„¶æˆ‘ç»™äº†æ‚¨ä»£ç é“¾æ¥ï¼Œä½†æ˜¯ä¸æ‰“ç®—ä½¿ç”¨å®ƒï¼Œè€Œæ˜¯åœ¨åç»­ä½¿ç”¨è„šæ‰‹æ¶çš„æ—¶å€™å†æ¥è€ƒè™‘é‡æ–°å­¦ä¹ æ ·å¼ã€è·¯ç”±ã€`Ajax`ã€æ ¡éªŒçš„ç”¨æ³•ã€‚

# 10.React çš„ Hooks

ä¸€äº›å¸¸è§çš„ `Hooks`ï¼Œå¾…è¡¥å……...

https://www.runoob.com/react/react-hooks.html

---

>   [!NOTE]
>
>   ç»“è¯­ï¼š...

**å¦‚æœæœ¬ç³»åˆ—æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥ [star ä¸€ä¸‹æˆ‘çš„ limou-learn-note](https://github.com/xiaogithubooo/LimouLearnNote)ï¼Œæ±‚æ±‚æƒ¹(à¹‘ï¼ ï¼œ)â˜†â™¡~**