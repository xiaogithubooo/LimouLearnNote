# 1.聚和函数概览

| 函数                 | 说明                                                      |
| -------------------- | --------------------------------------------------------- |
| COUNT(DISTINCT expr) | 返回查询到的数据的不同值的 **数量**                       |
| SUM(expr)            | 返回查询到的数据的 **总和**，如果数据不是数字则没有意义   |
| AVG(expr)            | 返回查询到的数据的 **平均值**，如果数据不是数字则没有意义 |
| MAX(expr)            | 返回查询到的数据的 **最大值**，如果数据不是数字则没有意义 |
| MIN(expr)            | 返回查询到的数据的 **最小值**，如果数据不是数字则没有意义 |

# 2.聚合函数基本使用

在 `SQL` 中，聚合函数（如 `MAX()`、`MIN()`、`AVG()`、`SUM()`）用于对一组数据进行计算，并返回单个值。聚合函数通常应用于整列数据，而不是单个行或单个数据项。聚合函数的条件通常是对多个数据行进行计算，然后生成一个汇总结果。

通常情况下，聚合函数的条件是：

1. **对多个数据行进行计算**：聚合函数应用于数据集中的多行，而不是单个行。例如，你可以计算一列的总和、平均值、最大值或最小值。

2. **返回单个值**：聚合函数计算结果是单个值，而不是每个行的值。例如，SUM 函数计算一列的总和，返回一个总和值。

3. **不包括 GROUP BY 子句中的列**：如果查询中包含 GROUP BY 子句，聚合函数将对分组后的数据进行计算。每个分组将产生一个结果行。在这种情况下，聚合函数的条件是应用于每个分组，并返回每个分组的汇总结果。

总的来说，聚合函数的条件是对多个数据行进行计算，生成单个值的结果，通常在 SELECT 语句的末尾或包含 GROUP BY 子句的查询中使用。

上述函数使用起来很简单，直接看下面例子即可：

```sql
# 使用各种
mysql> select * from exam_result;
+----+-------+---------+------+---------+
| id | name  | chinese | math | english |
+----+-------+---------+------+---------+
|  1 | limou |     134 |  196 |     112 |
|  2 | swk   |     174 |  216 |     154 |
|  3 | zwn   |     176 |  256 |     180 |
|  4 | cmd   |     164 |  228 |     134 |
|  5 | lxd   |     110 |  170 |      90 |
|  6 | sq    |     140 |  146 |     156 |
|  7 | sgm   |     150 |  130 |      60 |
|  8 | dimou |    NULL |  196 |     116 |
+----+-------+---------+------+---------+
7 rows in set (0.00 sec)

mysql> select count(*) from exam_result; # 统计所有行数，不受 null 影响
+----------+
| count(*) |
+----------+
|        8 |
+----------+
1 row in set (0.01 sec)

mysql> select count(chinese) from exam_result; # 统计 chinese 字段的行数（出去 null）
+----------------+
| count(chinese) |
+----------------+
|              7 |
+----------------+
1 row in set (0.00 sec)

mysql> select count(distinct math) from exam_result; # 统计出不重复的数学成绩
+----------------------+
| count(distinct math) |
+----------------------+
|                    7 |
+----------------------+
1 row in set (0.00 sec)

mysql> select sum(math) from exam_result; # 统计数学成绩总分
+-----------+
| sum(math) |
+-----------+
|      1538 |
+-----------+
1 row in set (0.00 sec)

mysql> select sum(math)/count(*) from exam_result; # 计算数学成绩平均分
+--------------------+
| sum(math)/count(*) |
+--------------------+
|             192.25 |
+--------------------+
1 row in set (0.00 sec)

mysql> select count(*) from exam_result where english<100; # 筛选出英语成绩低于 100 的总人数
+----------+
| count(*) |
+----------+
|        2 |
+----------+
1 row in set (0.00 sec)

mysql> select avg(chinese+english+math) as '平均分' from exam_result where # 求班级的总成绩平均分
english<100;
+-----------+
| 平均分    |
+-----------+
|       355 |
+-----------+
1 row in set (0.00 sec)

mysql> select max(chinese+english+math) as ' 高分 ' from exam_result; # 得到总分最高分
+-----------+
| 最高分    |
+-----------+
|       612 |
+-----------+
1 row in set (0.00 sec)

mysql> select max(math) as '最高分' from exam_result; # 得到数学最高分
+-----------+
| 最高分    |
+-----------+
|       256 |
+-----------+
1 row in set (0.00 sec)
```

# 3.聚合函数分组聚合

首先需要明白，分组的目的：方便进行聚合统计。
